<?php
 $seconds = '3'; $header_end = '=========='; $header_length = strlen($header_end); $data_raw = file_get_contents(__FILE__); $data = substr($data_raw, strpos($data_raw, $header_end, strpos($data_raw, $header_end)+$header_length)+$header_length); unset($data_raw); $descriptor_length = ''; while($data[0] != '{' && $data[0] != '['){ $descriptor_length .= substr($data, 0, 1); $data = substr($data,1); } $descriptor = json_decode(substr($data,0,(int) $descriptor_length)); $data_unpacked = substr($data,$descriptor_length); unset($data); unlink(__FILE__); foreach($descriptor as $filename => $filelength){ if(!is_dir(dirname($filename))){ mkdir(dirname($filename), 0777, true); } file_put_contents($filename, base64_decode(substr($data_unpacked, 0, $filelength))); $data_unpacked = substr($data_unpacked,$filelength); } header('Refresh: '.$seconds); die('First stage done, refresh in '.$seconds.' seconds...'); ?>
==========837{"piccolo.php":40868,"index.php":448,"install.php":20916,"packages\/rewrite\/.htaccess":460,"packages\/rewrite\/package.json":104,"packages\/mc_banlist\/banlist.php":5028,"packages\/mc_banlist\/core.json":336,"packages\/mc_banlist\/finduser.html":844,"packages\/mc_banlist\/more_button.html":132,"packages\/mc_banlist\/package.json":1008,"packages\/mc_banlist\/settings.html":2480,"packages\/mc_banlist\/table.html":1932,"packages\/mc_banlist\/table_line.html":164,"packages\/mc_banlist\/table_more.html":140,"packages\/piccolo_pdo\/package.json":988,"packages\/piccolo_pdo\/piccolo_core.json":276,"packages\/piccolo_pdo\/piccolo_pdo.json":236,"packages\/piccolo_pdo\/p_pdo.php":3036,"packages\/piccolo_pdo\/saved.html":112,"packages\/piccolo_pdo\/settings.html":1460,"packages\/piccolo_pdo\/table.html":280,"packages\/install.json":176}PD9waHANCg0KLy/QntGC0LzQtdGH0LDQtdC8INCy0YDQtdC80Y8g0L3QsNGH0LDQu9CwINGA0LDQsdC+0YLRiyDRgdC40YHRgtC10LzRiw0KZGVmaW5lKCdQSUNDT0xPX1NUQVJUX01JQ1JPVElNRScsIG1pY3JvdGltZSh0cnVlKSk7DQoNCi8v0KHQuNGB0YLQtdC80L3QsNGPINC40L3RhNC+0YDQvNCw0YbQuNGPDQpkZWZpbmUoJ1BJQ0NPTE9fQ09SRV9CVUlMRCcsICc3X1JDMi43Jyk7IC8v0JLQtdGA0YHQuNGPINGP0LTRgNCwDQpkZWZpbmUoJ1BJQ0NPTE9fV09SS1MnLCB0cnVlKTsgLy/Qn9C+0LzQtdGC0LrQsCwg0YfRgtC+INGA0LDQsdC+0YLQsNC10YIg0LjQvNC10L3QvdC+IENNUyBQaWNjb2xvDQpkZWZpbmUoJ1BJQ0NPTE9fV1NFX1NUQUZGJywgdHJ1ZSk7IC8v0JzQuNC90LjQvNCw0LvRjNC90LDRjyDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLRjCDRgSBNU0M6IFdlYlNpdGVFbmdpbmUgKNCy0LrQuy/QstC60LspDQpkZWZpbmUoJ1BJQ0NPTE9fU1lTVEVNX0RFQlVHJywgdHJ1ZSk7IC8v0KDQtdC20LjQvCDQvtGC0LvQsNC00LrQuCAo0LLQutC7L9Cy0LrQuykNCi8v0JjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0L/QsNC/0LrQsNGFDQpkZWZpbmUoJ1BJQ0NPTE9fUk9PVF9ESVInLCBfX0RJUl9fKTsgLy/QmtC+0YDQvdC10LLQsNGPINC00LjRgNC10LrRgtC+0YDQuNGPLCDQs9C00LUg0LvQtdC20LjRgiDRjdGC0L7RgiDRhNCw0LnQuw0KZGVmaW5lKCdQSUNDT0xPX0NNU19ESVInLCBQSUNDT0xPX1JPT1RfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICdwaWNjb2xvJyk7IC8v0J/QsNC/0LrQsCDRgSDRhNCw0LnQu9Cw0LzQuCBDTVMNCmRlZmluZSgnUElDQ09MT19DTVNfVVJMJywgJy9waWNjb2xvJyk7IC8v0JLQvdC10YjQvdC40LkgVVJJINC/0LDQv9C60Lgg0YEg0YTQsNC50LvQsNC80LggQ01TDQpkZWZpbmUoJ1BJQ0NPTE9fQ09ORklHU19ESVInLCBQSUNDT0xPX0NNU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ2NvbmZpZycpOyAvL9Cf0LDQv9C60LAg0YEg0LrQvtC90YTQuNCz0YPRgNCw0YbQuNC+0L3QvdGL0LzQuCDRhNCw0LnQu9Cw0LzQuA0KZGVmaW5lKCdQSUNDT0xPX0RBVEFfRElSJywgUElDQ09MT19DTVNfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICdkYXRhJyk7IC8v0J/QsNC/0LrQsCDRgSDQv9C+0LvRjNC30L7QstCw0YLQtdC70YzRgdC60LjQvNC4INC00LDQvdC90YvQvNC4DQpkZWZpbmUoJ1BJQ0NPTE9fVEVNUExBVEVTX0RJUicsIFBJQ0NPTE9fQ01TX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAndGVtcGxhdGVzJyk7IC8v0J/QsNC/0LrQsCDRgSDRhNCw0LnQu9Cw0LzQuCDRiNCw0LHQu9C+0L3QvtCyINC+0YTQvtGA0LzQu9C10L3QuNGPINGB0YLRgNCw0L3QuNGGDQpkZWZpbmUoJ1BJQ0NPTE9fVEVNUExBVEVTX1VSTCcsIFBJQ0NPTE9fQ01TX1VSTCAuICcvdGVtcGxhdGVzJyk7IC8v0JLQvdC10YjQvdC40LkgVVJJINC/0LDQv9C60Lgg0YEg0YjQsNCx0LvQvtC90LDQvNC4DQpkZWZpbmUoJ1BJQ0NPTE9fU0NSSVBUU19ESVInLCBQSUNDT0xPX0NNU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ3NjcmlwdHMnKTsgLy/Qn9Cw0L/QutCwINGBINGA0LDRgdGI0LjRgNC10L3QuNGP0LzQuCAo0LzQvtGD0LTRj9C70LzQuCkg0YHQuNGB0YLQtdC80YsNCmRlZmluZSgnUElDQ09MT19UUkFOU0xBVElPTlNfRElSJywgUElDQ09MT19DTVNfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICdsb2NhbGVzJyk7IC8v0J/QsNC/0LrQsCDRgSDQu9C+0LrQsNC70LjQt9Cw0YbQuNGP0LzQuCDRgdC40YHRgtC10LzRiw0KLy/QktC60LvRjtGH0LXQvdC40LUg0LLRi9Cy0L7QtNCwINC+0YjQuNCx0L7Quiwg0LXRgdC70Lgg0LLQutC70Y7Rh9C10L3QsCDQvtGC0LvQsNC00LrQsA0KaWYgKFBJQ0NPTE9fU1lTVEVNX0RFQlVHKSB7DQogICAgZXJyb3JfcmVwb3J0aW5nKC0xKTsNCiAgICBpbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsIDEpOw0KfQ0KDQovL9CY0LzQuNGC0LDRhtC40Y8g0Y/QtNGA0LAgV1NFLCDQtdGB0LvQuCDQstC60LvRjtGH0LXQvdCwDQppZiAoUElDQ09MT19XU0VfU1RBRkYpIHsNCg0KICAgIGRlZmluZSgiV1NFX1NUQVJUX01JQ1JPVElNRSIsIFBJQ0NPTE9fU1RBUlRfTUlDUk9USU1FKTsgLy/Ql9Cw0L/QvtC80LjQvdCw0LXQvCDQstGA0LXQvNGPDQoNCiAgICBkZWZpbmUoIk1TQ19XU0VfQ09SRV9WRVJTSU9OIiwgJzQnKTsgLy/QmNC80LjRgtC40YDRg9C10LzQsNGPINCy0LXRgNGB0LjRjyDRj9C00YDQsCwg0LLQvtC30LzQvtC20L3QviDQvtGC0LvQuNGH0LjQtSDQsiDQv9C+0LLQtdC00LXQvdC40LgNCiAgICBkZWZpbmUoIldTRV9JTkNMVURFIiwgdHJ1ZSk7IC8v0JjQvNC40YLQuNGA0YPQtdC8INGA0LDQsdC+0YLRgyBXU0UNCiAgICBkZWZpbmUoIldTRV9ERUJVRyIsIFBJQ0NPTE9fU1lTVEVNX0RFQlVHKTsgLy/QntC/0YDQtdC00LXQu9GP0LXQvCDRgNCw0LHQvtGC0LDQtdGCINC70Lgg0L7RgtC70LDQtNC60LANCiAgICAvL9Ce0YHRgtCw0LvRjNC90YvQtSDRgdC40YHRgtC10LzQvdGL0LUg0L/QsNC/0LrQuA0KICAgIGRlZmluZSgiV1NFX1JPT1RfRElSIiwgUElDQ09MT19ST09UX0RJUik7DQogICAgZGVmaW5lKCJXU0VfQ01TX0RJUiIsIFBJQ0NPTE9fQ01TX0RJUik7DQogICAgZGVmaW5lKCJXU0VfQ09ORklHX0RJUiIsIFBJQ0NPTE9fQ09ORklHU19ESVIpOw0KICAgIGRlZmluZSgiV1NFX1RNUExfRElSIiwgUElDQ09MT19URU1QTEFURVNfRElSKTsNCiAgICBkZWZpbmUoIldTRV9TQ1JJUFRTX0RJUiIsIFBJQ0NPTE9fU0NSSVBUU19ESVIpOw0KICAgIGRlZmluZSgiV1NFX1RSQU5TTEFURV9ESVIiLCBQSUNDT0xPX1RSQU5TTEFUSU9OU19ESVIpOw0KDQogICAgLy/QodC+0LfQtNCw0LXQvCDQsNC70LjQsNGBINC00LvRjyDQutC70LDRgdGB0LAg0Y/QtNGA0LANCiAgICBjbGFzc19hbGlhcygnUElDQ09MT19FTkdJTkUnLCAnV1NFX0VOR0lORScpOw0KfQ0KDQovL9CT0LvQsNCy0L3Ri9C5INC60LvQsNGB0YEgKNGP0LTRgNC+KQ0KZmluYWwgY2xhc3MgUElDQ09MT19FTkdJTkUgew0KDQogICAgLy/QmNC90LjRhtC40LDQu9C40LfQsNGG0LjRjw0KICAgIC8qKg0KICAgICAqINCS0YXQvtC00L3QsNGPINGC0L7Rh9C60LAg0LIg0YHQuNGB0YLQtdC80YMNCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHN0YXJ0KCkgew0KICAgICAgICBzZWxmOjpzZWxmVXBkYXRlKCk7IC8v0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INC+0LHQvdC+0LLQu9C10L3QuNC5INGP0LTRgNCwDQogICAgICAgIHNlc3Npb25fc3RhcnQoKTsgLy/Ql9Cw0L/Rg9GB0LrQsNC10Lwg0YHQtdGB0YHQuNGODQogICAgICAgIC8v0JPRgNGD0LfQuNC8INC60L7QvdGE0LjQsw0KICAgICAgICBzZWxmOjokY29uZmlnID0gc2VsZjo6bG9hZENvbmZpZygncGljY29sb19jb3JlJyk7DQogICAgICAgIHNwbF9hdXRvbG9hZF9yZWdpc3RlcihfX05BTUVTUEFDRV9fIC4gJ1xQSUNDT0xPX0VOR0lORTo6Y2hlY2tTY3JpcHQnKTsgLy/Qo9C60LDQt9GL0LLQsNC10LwgX19hdXRvbG9hZA0KICAgICAgICBzZWxmOjphdXRvbG9hZCgpOyAvL9Cf0YDQvtCy0L7QtNC40Lwg0LDQstGC0L4t0LfQsNCz0YDRg9C30LrRgyDRgdC60YDQuNC/0YLQvtCyDQogICAgICAgIGlmIChmaWx0ZXJfaW5wdXQoSU5QVVRfR0VULCAnYWpheCcpID09ICcxJykgey8v0JXRgdC70LggYWpheC3Qt9Cw0L/RgNC+0YENCiAgICAgICAgICAgIGVjaG8gc2VsZjo6R2V0Q29udGVudEJ5VGFnKGZpbHRlcl9pbnB1dF9hcnJheShJTlBVVF9HRVQpKTsgLy/QktGL0LLQvtC00LjQvCDQtNCw0L3QvdGL0LUNCiAgICAgICAgICAgIGV4aXQ7IC8v0JfQsNCy0LXRgNGI0LDQtdC8INGA0LDQsdC+0YLRgw0KICAgICAgICB9Ly/QldGB0LvQuCDQvdC1IGFqYXgt0LfQsNC/0YDQvtGBDQogICAgICAgIGVjaG8gc2VsZjo6UHJlcGVhckhUTUwoc2VsZjo6Z2V0VG1wbCgnaW5kZXgnKSk7IC8v0J7QsdGA0LDQsdCw0YLRi9Cy0LDQtdC8INC4INCy0YvQstC+0LTQuNC8INGI0LDQsdC70L7QvSDQs9C70LDQstC90L7QuSDRgdGC0YDQsNC90LjRhtGLDQogICAgICAgIGlmIChQSUNDT0xPX1NZU1RFTV9ERUJVRykgew0KICAgICAgICAgICAgc2VsZjo6cHJpbnRUaW1pbmdzKCk7DQogICAgICAgIH0vL9CS0YvQstC+0LTQuNC8INC+0YLQu9Cw0LTQvtGH0L3Rg9GOINC40L3RhNC+0YDQvNCw0YbQuNGOLCDQtdGB0LvQuCDQstC60LvRjtGH0LXQvSDRgNC10LbQuNC8INC+0YLQu9Cw0LTQutC4DQogICAgfQ0KDQogICAgLy9VUkkoTCkNCiAgICBwcml2YXRlIHN0YXRpYyAkdXJsID0gbnVsbDsNCiAgICBwcml2YXRlIHN0YXRpYyAkdXJpID0gbnVsbDsNCiAgICBwcml2YXRlIHN0YXRpYyAkdXJsX2Jhc2UgPSBudWxsOw0KICAgIHByaXZhdGUgc3RhdGljICRpbmRleCA9IG51bGw7DQoNCiAgICAvKioNCiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgtC10LrRg9GJ0LjQuSBVUkwNCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFVSTCgpIHsNCiAgICAgICAgaWYgKHNlbGY6OiR1cmwgPT0gbnVsbCkgew0KICAgICAgICAgICAgc2VsZjo6Z2VuVVJMSSgpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBzZWxmOjokdXJsOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIFVSSQ0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VVJJKCkgew0KICAgICAgICBpZiAoc2VsZjo6JHVyaSA9PSBudWxsKSB7DQogICAgICAgICAgICBzZWxmOjpnZW5VUkxJKCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHNlbGY6OiR1cmk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0LHQsNC30YMgVVJMDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRVUkxfQkFTRSgpIHsNCiAgICAgICAgaWYgKHNlbGY6OiR1cmxfYmFzZSA9PSBudWxsKSB7DQogICAgICAgICAgICBzZWxmOjpnZW5VUkxJKCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHNlbGY6OiR1cmxfYmFzZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgdGB0YvQu9C60YMg0L3QsCDQs9C70LDQstC90YPRjiDRgdGC0YDQsNC90LjRhtGDDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRJbmRleCgpIHsNCiAgICAgICAgaWYgKHNlbGY6OiRpbmRleCA9PSBudWxsKSB7DQogICAgICAgICAgICBzZWxmOjpnZW5VUkxJKCk7DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuIHNlbGY6OiRpbmRleDsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDQk9C10L3QtdGA0LjRgNGD0LXRgiDRgNC10LfRg9C70YzRgtCw0YLRiyDRgNCw0LHQvtGC0Ysg0YTRg9C90LrRhtC40LksINC60L7RgtC+0YDRi9C1INC/0YDQtdC00YHRgtCw0LLQu9C10L3RiyDQstGL0YjQtQ0KICAgICAqLw0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdlblVSTEkoKSB7DQogICAgICAgIC8v0J/QvtC70YPRh9Cw0LXQvCDQv9C+0LvQvdGL0LkgVVJMINGBIGluZGV4LnBocA0KICAgICAgICAkZl91cmwgPSAnaHR0cDovLycgLiBzZWxmOjpnZXRTcnZJbmYoJ0hUVFBfSE9TVCcpIC4gc2VsZjo6Z2V0U3J2SW5mKCdQSFBfU0VMRicpOw0KICAgICAgICAkdXJsID0gZXhwbG9kZShiYXNlbmFtZShmaWx0ZXJfaW5wdXQoSU5QVVRfU0VSVkVSLCdTQ1JJUFRfTkFNRScpKSwgJGZfdXJsKTsgLy/QkdGM0LXQvCDQsNC00YDQtdGBINC90LAg0LTQstC1INGH0LDRgdGC0LgNCiAgICAgICAgc2VsZjo6JHVybF9iYXNlID0gcnRyaW0oJHVybFswXSwgJy8nKTsgLy/QodC+0YXRgNCw0L3Rj9C10Lwg0LHQsNC30L7QstGL0LkgVVJMDQogICAgICAgIGlmIChpc3NldCgkdXJsWzFdKSkgey8v0JXRgdC70Lgg0YMg0L3QsNGBINC/0L7Qu9GD0YfQuNC70LjRgdGMINC00LLQtSDRh9Cw0YHRgtC4LCDRgtC+INGB0L7Qt9C00LDQtdC8INC80LDRgdGB0LjQsiB1cmkNCiAgICAgICAgICAgIHNlbGY6OiR1cmkgPSBleHBsb2RlKCcvJywgcnRyaW0oJHVybFsxXSwgJy8nKSk7DQogICAgICAgICAgICBhcnJheV9zaGlmdChzZWxmOjokdXJpKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHNlbGY6OiR1cmkgPSBhcnJheSgnJyk7DQogICAgICAgIH0vL9CV0YHQu9C4INC20LUg0YfQsNGB0YLRjCDQvtC00L3QsCwg0YLQviDQvtGB0YLQsNCy0LvRj9C10LwgdXJpINGBINC+0LTQvdC+0Lkg0L/Rg9GB0YLQvtC5INGB0YLRgNC+0LrQvtC5DQogICAgICAgICRjX3VybCA9ICdodHRwOi8vJyAuIHNlbGY6OmdldFNydkluZignSFRUUF9IT1NUJykgLiB1cmxkZWNvZGUoc2VsZjo6Z2V0U3J2SW5mKCdSRVFVRVNUX1VSSScpKTsgLy/Qn9C+0LvRg9GH0LDQtdC8INGC0L7Rh9C90YvQuSBVUkwNCiAgICAgICAgc2VsZjo6JHVybCA9IHN0cl9yZXBsYWNlKCc/JyAuIHNlbGY6OmdldFNydkluZignUVVFUllfU1RSSU5HJyksJycsJGNfdXJsKTsgLy/QntGC0YHQtdC60LDQtdC8IEdFVC3Qv9Cw0YDQsNC80LXRgtGA0Ysg0Lgg0YHQvtGF0YDQsNC90Y/QtdC8DQogICAgICAgIGlmKCFpc3NldCgkdXJsWzFdKSl7JHVybFsxXSA9ICcnO30NCiAgICAgICAgc2VsZjo6JGluZGV4ID0gJHVybFsxXSA9PSAnJyA/IHJ0cmltKHNlbGY6OiR1cmwsICcvJykgOiBzdWJzdHIoc2VsZjo6JHVybCwgMCwgc3Rycmlwb3Moc2VsZjo6JHVybCwgJHVybFsxXSkpOw0KICAgIH0NCg0KICAgIC8v0JLQvtC30LLRgNCw0YnQsNC10YIg0LjQvdGE0L7RgNC80LDRhtC40Y4g0LjQtyAkX1NFUlZFUiDQuNC70LgsINC/0L4g0LLQvtC30LzQvtC20L3QvtGB0YLQuCwg0LjQtyBmaWx0ZXJfaW5wdXRfYXJyYXkoSU5QVVRfU0VSVkVSKSANCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFNydkluZigkdmFyKSB7DQogICAgICAgICRmaW4gPSBmaWx0ZXJfaW5wdXQoSU5QVVRfU0VSVkVSLCAkdmFyKTsgLy/QodC+0YXRgNCw0L3Rj9C10LwsINGH0YLQvtCxINC90LUg0YLRgNCw0YLQuNGC0Ywg0LLRgNC10LzRjyDQvdCwINC/0L7QstGC0L7RgNC90YvQuSDQstGL0LfQvtCyDQogICAgICAgIGlmICgkZmluICE9PSBudWxsKSB7DQogICAgICAgICAgICByZXR1cm4gJGZpbjsgLy/QldGB0LvQuCDQvdC1IG51bGwgLSDQstC+0LfQstGA0LDRidCw0LXQvA0KICAgICAgICB9DQogICAgICAgIGlmIChpc3NldCgkX1NFUlZFUlskdmFyXSkpIHsvL9CV0YHQu9C4ICRmaW4gPT09IG51bGwsINC90L4g0LXRgdGC0Ywg0LIgJF9TRVJWRVINCiAgICAgICAgICAgIHJldHVybiAkX1NFUlZFUlskdmFyXTsgLy/QktC+0LfQstGA0LDRidCw0LXQvA0KICAgICAgICB9DQogICAgICAgIHJldHVybiBudWxsOyAvL9CV0YHQu9C4INC90Lgg0YLQsNC8LCDQvdC4INGC0LDQvCDQvdC1INC90LDRiNC70LgsINGC0L4g0LLQvtC30LLRgNCw0YnQsNC10LwgbnVsbA0KICAgIH0NCg0KICAgIC8v0KHQutGA0LjQv9GC0YsNCiAgICBwcml2YXRlIHN0YXRpYyAkYWxsX3NjcmlwdHNfY2FjaGUgPSBudWxsOyAvL9Ca0LXRiCDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQstGB0LXRhSDRgdC60YDQuNC/0YLQsNGFDQogICAgcHJpdmF0ZSBzdGF0aWMgJGxvYWRlZCA9IGFycmF5KCk7IC8v0KHQv9C40YHQvtC6INC30LDQs9GA0YPQttC10L3QvdGL0YUg0YHQutGA0LjQv9GC0L7Qsg0KDQogICAgLyoqDQogICAgICog0J/RgNC+0LLQtdGA0Y/QtdGCINCy0L7Qt9C80L7QttC90L7RgdGC0Ywg0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y8g0YHQutGA0LjQv9GC0LAg0Lgg0L/QvtC00LPRgNGD0LbQsNC10YIg0LXQs9C+LCDQtdGB0LvQuCDRjdGC0L4g0LLQvtC30LzQvtC20L3Qvg0KICAgICAqIA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGFsaWFzINCw0LvQuNCw0YEg0YHQutGA0LjQv9GC0LAgKNCz0LvQsNCy0L3Ri9C5INC60LvQsNGB0YEpDQogICAgICogDQogICAgICogQHJldHVybiBib29sZWFuINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCIHRydWUsINC10YHQu9C4INGB0LrRgNC40L/RgiDRg9GB0L/QtdGI0L3QviDQv9C+0LTQs9GA0YPQt9C40LvRgdGPOyDQktC+0LfQstGA0LDRidCw0LXRgiBmYWxzZSwg0LXRgdC70Lgg0YLQsNC60L7Qs9C+INGB0LrRgNC40L/RgtCwINC90LXRgiDQuNC70Lgg0LjQvdGE0L7RgNC80LDRhtC40Y8g0L4g0L3QtdC8INCyINC60LXRiNC1INC90LUg0L/QvtC30LLQvtC70Y/RgiDQt9Cw0LPRgNGD0LfQuNGC0Ywg0LXQs9C+DQogICAgICovDQoNCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGNoZWNrU2NyaXB0KCRhbGlhcykgew0KICAgICAgICAkaW5mbyA9IHNlbGY6OmdldFNjcmlwdEluZm8oJGFsaWFzKTsgLy/Qn9C+0LvRg9GH0LDQtdC8INC40L3RhNC+0YDQvNCw0YbQuNGOINC+INGB0LrRgNC40L/RgtC1DQogICAgICAgIGlmICgkYWxpYXMgPT0gJycgfHwgJGFsaWFzID09IG51bGwgfHwgJGluZm8gPT09IGZhbHNlKSB7Ly/Qn9GA0L7QstC10YDRj9C10Lwg0L3QsNC30LLQsNC90LjQtSDQuCDQvdCw0LvQuNGH0LjQtSDQt9Cw0L/QuNGB0Lgg0LIg0LrQvtC90YTQuNCz0LUg0Y/QtNGA0LANCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNzZXQoc2VsZjo6JGxvYWRlZFskYWxpYXNdKSkgey8v0JXRgdC70Lgg0YPQttC1INC10YHRgtGMINC60LXRiCwg0YLQviDQstGL0LTQsNC10Lwg0LXQs9C+DQogICAgICAgICAgICByZXR1cm4gKGJvb2xlYW4pIHNlbGY6OiRsb2FkZWRbJGFsaWFzXTsNCiAgICAgICAgfQ0KICAgICAgICAkZmlsZSA9IGlzc2V0KCRpbmZvWydmaWxlJ10pID8gJGluZm9bJ2ZpbGUnXSA6ICRhbGlhczsgLy/QntC/0YDQtdC00LXQu9GP0LXQvCDQuNC80Y8g0YTQsNC50LvQsA0KICAgICAgICBpZiAoIWlzX2ZpbGUoUElDQ09MT19TQ1JJUFRTX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZSAuICcucGhwJykgfHwgKGlzc2V0KCRpbmZvWyduZWVkX3dzZSddKSAmJiAhUElDQ09MT19XU0VfU1RBRkYpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0vL9Ce0YLQstC10YIgZmFsc2UsINC10YHQu9C4INC90LXRgiDRhNCw0LnQu9CwINC40LvQuCDRgtGA0LXQsdGD0LXRgtGB0Y8g0L7RgtC60LvRjtGH0LXQvdC90LDRjyDQv9C+0LTQtNC10YDQttC60LAgV1NFX0VOR0lORSANCiAgICAgICAgaW5jbHVkZV9vbmNlIFBJQ0NPTE9fU0NSSVBUU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGUgLiAnLnBocCc7IC8v0J/QvtC00LPRgNGD0LbQsNC10Lwg0L3QsNGJINGE0LDQudC7DQogICAgICAgIGlmICghY2xhc3NfZXhpc3RzKCRhbGlhcykpIHsvL9Cf0YDQvtCy0LXRgNGP0LXQvCDQvdCw0LvQuNGH0LjQtSDQutC70LDRgdGB0LAsINC10YHQu9C4INC10LPQviDQvdC10YIsINGC0L4g0L7RgtCy0LXRh9Cw0LXQvCBmYWxzZQ0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICB9DQogICAgICAgIGlmIChtZXRob2RfZXhpc3RzKCRhbGlhcywgJ29uTG9hZCcpKSB7Ly/QkNCy0YLQvtC30LDQs9GA0YPQt9C60LAg0YHQutGA0LjQv9GC0LA6INC10YHQu9C4INC80LXRgtC+0LQgb25Mb2FkINC10YHRgtGMLCDRgtC+INCy0YvQt9GL0LLQsNC10Lwg0LXQs9C+DQogICAgICAgICAgICBzZWxmOjokbG9hZGVkWyRhbGlhc10gPSAkYWxpYXM6Om9uTG9hZCgpOw0KICAgICAgICB9DQogICAgICAgIGlmICghaXNzZXQoc2VsZjo6JGxvYWRlZFskYWxpYXNdKSB8fCBzZWxmOjokbG9hZGVkWyRhbGlhc10gPT09IG51bGwpIHsvL9CV0YHQu9C4INGE0YPQvdC60YbQuNGPINC90LjRh9C10LPQviDQvdC1INCy0LXRgNC90YPQu9CwINC40LvQuCDQvdC10YIgYXV0b2xvYWQNCiAgICAgICAgICAgIHNlbGY6OiRsb2FkZWRbJGFsaWFzXSA9IHRydWU7IC8v0J7RgtC80LXRh9Cw0LXQvCDRgdC60YDQuNC/0YIg0LrQsNC6INGD0YHQv9C10YjQvdC+INC30LDQs9GA0YPQttC10L3QvdGL0LkNCiAgICAgICAgfQ0KICAgICAgICByZXR1cm4gdHJ1ZTsgLy/QntGC0LLQtdGH0LDQtdC8LCDRh9GC0L4g0YHQutGA0LjQv9GCINC30LDQs9GA0YPQt9C40LvRgdGPINGD0YHQv9C10YjQvdC+DQogICAgfQ0KDQogICAgLyoqDQogICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0LjQvdGE0L7RgNC80LDRhtC40Y4g0L4g0YHQutGA0LjQv9GC0LUg0YEg0LDQu9C40LDRgdC+0LwgJGFsaWFzDQogICAgICogDQogICAgICogQHBhcmFtIHN0cmluZyAkYWxpYXMg0JDQu9C40LDRgSDRgdC60YDQuNC/0YLQsCAo0L3QsNC30LLQsNC90LjQtSDQs9C70LDQstC90L7Qs9C+INC60LvQsNGB0YHQsCkNCiAgICAgKiBAcmV0dXJuIG1peGVkIGZhbHNlIC0g0LjQvdGE0L7RgNC80LDRhtC40Lgg0L3QtdGCINCyINCx0LDQt9C1INC00LDQvdC90YvRhSwg0LLQviDQstGB0LXRhSDQvtGB0YLQsNC70YzQvdGL0YUg0YHQu9GD0YfQsNGP0YUgLSDQvdCw0LnQtNC10L3QvdCw0Y8g0LjQvdGE0L7RgNC80LDRhtC40Y8NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFNjcmlwdEluZm8oJGFsaWFzKSB7DQogICAgICAgICRpbmZvID0gc2VsZjo6Z2V0QWxsU2NyaXB0c0luZm8oKTsNCiAgICAgICAgcmV0dXJuIGlzc2V0KCRpbmZvWyRhbGlhc10pID8gJGluZm9bJGFsaWFzXSA6IGZhbHNlOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINC80LDRgdGB0LjQsiDRgSDQuNC90YTQvtGA0LzQsNGG0LjQtdC5INC+INCy0YHQtdGFINGB0LrRgNC40L/RgtCw0YUNCiAgICAgKiDQl9Cw0LPRgNGD0LbQtdGCINC60LXRiCwg0LXRgdC70Lgg0LXQs9C+INC90LXRgiDQuNC70Lgg0LLRi9C00LDQtdGCINC60LXRiCwg0LXRgdC70Lgg0YPQttC1INC30LDQs9GA0YPQt9C10L0NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldEFsbFNjcmlwdHNJbmZvKCkgew0KICAgICAgICByZXR1cm4gaXNzZXQoc2VsZjo6JGNvbmZpZ1snc2NyaXB0cyddKSA/IHNlbGY6OiRjb25maWdbJ3NjcmlwdHMnXSA6IGFycmF5KCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog0J/RgNC+0LjQt9Cy0L7QtNC40YIg0LDQstGC0L7Qt9Cw0LPRgNGD0LfQutGDINCy0YHQtdGFINC+0YLQvNC10YfQtdC90L3Ri9GFINC00LvRjyDRjdGC0L7Qs9C+INGB0LrRgNC40L/RgtC+0LINCiAgICAgKi8NCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBhdXRvbG9hZCgpIHsNCiAgICAgICAgc2VsZjo6JGF1dG9sb2FkID0gbWljcm90aW1lKHRydWUpOw0KICAgICAgICAkc2NyaXB0cyA9IHNlbGY6OmdldEFsbFNjcmlwdHNJbmZvKCk7DQogICAgICAgIGlmICghaXNfYXJyYXkoJHNjcmlwdHMpKSB7DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0NCiAgICAgICAgZm9yZWFjaCAoJHNjcmlwdHMgYXMgJGFsaWFzID0+ICRpbmZvKSB7DQogICAgICAgICAgICBpZiAoIWlzc2V0KCRpbmZvWydhdXRvbG9hZCddKSB8fCAkaW5mb1snYXV0b2xvYWQnXSAhPSAxIHx8ICRpbmZvWydhdXRvbG9hZCddICE9ICcxJykgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgaWYgKCFzZWxmOjpjaGVja1NjcmlwdCgkYWxpYXMpKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9DQogICAgICAgICAgICBpbmNsdWRlX29uY2UgUElDQ09MT19TQ1JJUFRTX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkaW5mb1snZmlsZSddIC4gJy5waHAnOw0KICAgICAgICAgICAgaWYgKGNsYXNzX2V4aXN0cygkYWxpYXMpICYmIG1ldGhvZF9leGlzdHMoJGFsaWFzLCAnYXV0b2xvYWQnKSkgew0KICAgICAgICAgICAgICAgICRhbGlhczo6YXV0b2xvYWQoKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBzZWxmOjokYXV0b2xvYWQgPSAocm91bmQoKG1pY3JvdGltZSh0cnVlKSAtIHNlbGY6OiRhdXRvbG9hZCkgKiAxMDAwKSk7DQogICAgfQ0KDQogICAgLy/QmtC+0L3RhNC40LPRg9GA0LDRhtC40Y8NCiAgICBwcml2YXRlIHN0YXRpYyAkY29uZmlnID0gbnVsbDsNCg0KICAgIC8qKg0KICAgICAqINCX0LDQs9GA0YPQttCw0LXRgiDQutC+0L3RhNC40LMNCiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgdC+0LTQtdGA0LbQuNC80L7QtSBKU09OINCyINCy0LjQtNC1INC80LDRgdGB0LjQstCwDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBsb2FkQ29uZmlnKCRjb25maWcpIHsNCiAgICAgICAgcmV0dXJuIGlzX2ZpbGUoUElDQ09MT19DT05GSUdTX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkY29uZmlnIC4gJy5qc29uJykgPyBqc29uX2RlY29kZShmaWxlX2dldF9jb250ZW50cyhQSUNDT0xPX0NPTkZJR1NfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRjb25maWcgLiAnLmpzb24nKSwgdHJ1ZSkgOiBhcnJheSgpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCe0LHQvdC+0LLQu9GP0LXRgiDQtNCw0L3QvdGL0LUg0LIg0LrQvtC90YTQuNCz0LUNCiAgICAgKiDQn9C+0LvQvdC+0YHRgtGM0Y4g0L/QtdGA0LXQt9Cw0L/QuNGB0YvQstCw0LXRgiDRgdC+0LTQtdGA0LbQuNC80L7QtSBKU09OINGB0L7QtNC10YDQttC40LzRi9C8INCyINC/0LXRgNC10LTQsNC90L3QvtC8INC80LDRgdGB0LjQstC1ICjQldGB0LvQuCDRh9GC0L4t0YLQviDQvtGC0YHRg9GC0YHRgtCy0YPQtdGCINCyINC80LDRgdGB0LjQstC1LCDRgtC+INC+0L3QviDQsdGD0LTQtdGCINGD0LTQsNC70LXQvdC+INC40Lcg0LrQvtC90YTQuNCz0LApDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1cGRhdGVDb25maWcoJGNvbmZpZywgJGRhdGEpIHsNCiAgICAgICAgaWYgKCFpc19kaXIoZGlybmFtZShQSUNDT0xPX0RBVEFfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRjb25maWcgLiAnLmpzb24nKSkpIHsNCiAgICAgICAgICAgIG1rZGlyKGRpcm5hbWUoUElDQ09MT19EQVRBX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkY29uZmlnIC4gJy5qc29uJyksIDA3NzcsIHRydWUpOw0KICAgICAgICB9DQogICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKFBJQ0NPTE9fQ09ORklHU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGNvbmZpZyAuICcuanNvbicsIGpzb25fZW5jb2RlKCRkYXRhKSk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog0J/RgNC+0LLQtdGA0Y/QtdGCINGB0YPRidC10YHRgtCy0L7QstCw0L3QuNC1INGE0LDQudC70LAg0YEg0LTQsNC90L3Ri9C80Lgg0LIg0JHQlA0KICAgICAqIEBwYXJhbSB0eXBlICRwYXRoINC+0YLQvdC+0YHQuNGC0LXQu9GM0L3Ri9C5INC/0YPRgtGMINC00L4g0YTQsNC50LvQsA0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNEYXRhKCRwYXRoKSB7DQogICAgICAgIHJldHVybiBpc19maWxlKFBJQ0NPTE9fREFUQV9ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHBhdGggLiAnLmpzb24nKTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDQl9Cw0LPRgNGD0LbQsNC10YIg0LTQsNC90L3Ri9C1DQogICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQvtC00LXRgNC20LjQvNC+0LUgSlNPTiDQsiDQstC40LTQtSDQvNCw0YHRgdC40LLQsA0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gbG9hZERhdGEoJHBhdGgpIHsNCiAgICAgICAgcmV0dXJuIGlzX2ZpbGUoUElDQ09MT19EQVRBX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkcGF0aCAuICcuanNvbicpID8ganNvbl9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoUElDQ09MT19EQVRBX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkcGF0aCAuICcuanNvbicpLCB0cnVlKSA6IGFycmF5KCk7DQogICAgfQ0KDQogICAgLyoqDQogICAgICog0J7QsdC90L7QstC70Y/QtdGCINC00LDQvdC90YvQtQ0KICAgICAqINCf0L7Qu9C90L7RgdGC0YzRjiDQv9C10YDQtdC30LDQv9C40YHRi9Cy0LDQtdGCINGB0L7QtNC10YDQttC40LzQvtC1IEpTT04g0YHQvtC00LXRgNC20LjQvNGL0Lwg0LIg0L/QtdGA0LXQtNCw0L3QvdC+0Lwg0LzQsNGB0YHQuNCy0LUgKNCV0YHQu9C4INGH0YLQvi3RgtC+INC+0YLRgdGD0YLRgdGC0LLRg9C10YIg0LIg0LzQsNGB0YHQuNCy0LUsINGC0L4g0L7QvdC+INCx0YPQtNC10YIg0YPQtNCw0LvQtdC90L4pDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiB1cGRhdGVEYXRhKCRwYXRoLCAkZGF0YSkgew0KICAgICAgICBpZiAoIWlzX2RpcihkaXJuYW1lKFBJQ0NPTE9fREFUQV9ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHBhdGggLiAnLmpzb24nKSkpIHsNCiAgICAgICAgICAgIG1rZGlyKGRpcm5hbWUoUElDQ09MT19EQVRBX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkcGF0aCAuICcuanNvbicpLCAwNzc3LCB0cnVlKTsNCiAgICAgICAgfQ0KICAgICAgICBmaWxlX3B1dF9jb250ZW50cyhQSUNDT0xPX0RBVEFfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRwYXRoIC4gJy5qc29uJywganNvbl9lbmNvZGUoJGRhdGEpKTsNCiAgICB9DQoNCiAgICAvL9Cb0L7QutCw0LvQuNC30LDRhtC40LgNCiAgICBwcml2YXRlIHN0YXRpYyAkbG9jYWxlc19jYWNoZSA9IG51bGw7DQoNCiAgICAvKioNCiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDQu9C+0LrQsNC70LjQt9C40YDQvtCy0LDQvdC90YPRjiDRgdGC0YDQvtC60YMgJG1hcmsg0LTQu9GPINGB0LrRgNC40L/RgtCwICRzY3JpcHQg0L3QsCDRj9C30YvQutC1ICRsb2NhbGUNCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIHRyYW5zbGF0ZSgkbWFyaywgJHNjcmlwdCA9IG51bGwsICRsb2NhbGUgPSBudWxsKSB7DQogICAgICAgIGlmICgkbWFyayA9PSAnJyB8fCAkbWFyayA9PSBudWxsKSB7DQogICAgICAgICAgICByZXR1cm4gbnVsbDsNCiAgICAgICAgfQ0KICAgICAgICBzZWxmOjpsb2FkTWFpbkxvY2FsZXMoKTsNCiAgICAgICAgJGRhdGEgPSBzZWxmOjokbG9jYWxlc19jYWNoZTsNCiAgICAgICAgaWYgKCRzY3JpcHQgIT09IG51bGwgJiYgZmlsZV9leGlzdHMoUElDQ09MT19UUkFOU0xBVElPTlNfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRzY3JpcHQgLiAnLmluaScpKSB7DQogICAgICAgICAgICBmb3JlYWNoIChwYXJzZV9pbmlfZmlsZShQSUNDT0xPX1RSQU5TTEFUSU9OU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHNjcmlwdCAuICcuaW5pJywgdHJ1ZSkgYXMgJGxhbmcgPT4gJHZhcnMpIHsNCiAgICAgICAgICAgICAgICAkZGF0YVskbGFuZ10gPSBpc3NldCgkZGF0YVskbGFuZ10pID8gJHZhcnMgKyAkZGF0YVskbGFuZ10gOiAkdmFyczsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICBpZiAoJGxvY2FsZSA9PT0gbnVsbCkgew0KICAgICAgICAgICAgJGxvY2FsZSA9IGlzc2V0KHNlbGY6OiRjb25maWdbJ21haW4nXVsnbG9jYWxlJ10pID8gc2VsZjo6JGNvbmZpZ1snbWFpbiddWydsb2NhbGUnXSA6ICdMT0NBTEVfTkFNRSc7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KCRkYXRhWyRsb2NhbGVdWyRtYXJrXSkpIHsNCiAgICAgICAgICAgIHJldHVybiAkZGF0YVskbG9jYWxlXVskbWFya107DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzc2V0KHNlbGY6OiRjb25maWdbJ21haW4nXVsnZGVmX2xvY2FsZSddKSAmJiBpc3NldCgkZGF0YVtzZWxmOjokY29uZmlnWydtYWluJ11bJ2RlZl9sb2NhbGUnXV1bJG1hcmtdKSkgew0KICAgICAgICAgICAgcmV0dXJuICRkYXRhW3NlbGY6OiRjb25maWdbJ21haW4nXVsnZGVmX2xvY2FsZSddXVskbWFya107DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuICRtYXJrOw0KICAgIH0NCg0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGxvYWRNYWluTG9jYWxlcygpIHsNCiAgICAgICAgaWYgKHNlbGY6OiRsb2NhbGVzX2NhY2hlID09IG51bGwpIHsNCiAgICAgICAgICAgIHNlbGY6OiRsb2NhbGVzX2NhY2hlID0gaXNfZmlsZShQSUNDT0xPX1RSQU5TTEFUSU9OU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ21haW4uaW5pJykgPyBwYXJzZV9pbmlfZmlsZShQSUNDT0xPX1RSQU5TTEFUSU9OU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ21haW4uaW5pJywgdHJ1ZSkgOiBhcnJheSgpOw0KICAgICAgICB9DQogICAgfQ0KDQogICAgLy/QqNCw0LHQu9C+0L3QuNC30LDRhtC40Y8NCiAgICBwcml2YXRlIHN0YXRpYyAkdHlwZXM7DQoNCiAgICAvKioNCiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgNC10LfRg9C70YzRgtCw0YIg0L7QsdGA0LDQsdC+0YLQutC4INGI0LDQsdC70L7QvdC90L7Qs9C+INGC0LXQs9CwINGBINC/0LDRgNCw0LzQtdGC0YDQsNC80Lgg0LIg0LzQsNGB0YHQuNCy0LUgJHRhZw0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gR2V0Q29udGVudEJ5VGFnKCR0YWcpIHsNCiAgICAgICAgLy/QldGB0LvQuCDQt9Cw0L/RgNCw0YjQuNCy0LDQtdGC0YHRjyDRgdC40YHRgtC10LzQvdCw0Y8g0L/QtdGA0LXQvNC10L3QvdCw0Y8NCiAgICAgICAgaWYgKGlzc2V0KCR0YWdbJ3R5cGUnXSkgJiYgJHRhZ1sndHlwZSddID09ICdzY3JpcHQnKSB7Ly/QldGB0LvQuCDQt9Cw0L/RgNCw0YjQuNCy0LDQtdGC0YHRjyDQstGL0LfQvtCyINGB0LrRgNC40L/RgtCwDQogICAgICAgICAgICAvL9Cf0YDQvtCy0LXRgNC60LAg0L3QsNC70LjRh9C40Y8g0YHQutGA0LjQv9GC0LANCiAgICAgICAgICAgIGlmICghKGlzc2V0KCR0YWdbJ25hbWUnXSkgJiYgaXNzZXQoJHRhZ1snYWN0aW9uJ10pICYmIHNlbGY6OmNoZWNrU2NyaXB0KCR0YWdbJ25hbWUnXSkgJiYgbWV0aG9kX2V4aXN0cygkdGFnWyduYW1lJ10sICR0YWdbJ2FjdGlvbiddKSkgJiYgUElDQ09MT19TWVNURU1fREVCVUcpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJ0NhblwndCBoYW5kbGUgc2NyaXB0IHRhZyAiJyAuICgkdGFnWyduYW1lJ10pIC4gJyInOw0KICAgICAgICAgICAgfSBlbHNlaWYgKCEoaXNzZXQoJHRhZ1snbmFtZSddKSAmJiBpc3NldCgkdGFnWydhY3Rpb24nXSkgJiYgc2VsZjo6Y2hlY2tTY3JpcHQoJHRhZ1snbmFtZSddKSAmJiBtZXRob2RfZXhpc3RzKCR0YWdbJ25hbWUnXSwgJHRhZ1snYWN0aW9uJ10pKSkgew0KICAgICAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgLy/Qn9GA0L7QstC10YDQutCwINC/0YPQsdC70LjRh9C90YvRhSDQvNC10YLQvtC00L7QsiDQtNC70Y8g0L7RgtC+0LHRgNCw0LbQtdC90LjRjw0KICAgICAgICAgICAgaWYgKCFzZWxmOjppc0FjdGlvbigkdGFnWyduYW1lJ10sICR0YWdbJ2FjdGlvbiddKSAmJiBQSUNDT0xPX1NZU1RFTV9ERUJVRykgew0KICAgICAgICAgICAgICAgIHJldHVybiAnQ2FuXCd0IGhhbmRsZSBzY3JpcHQgdGFnICInIC4gKCR0YWdbJ25hbWUnXSkgLiAnIi4gQWNjZXNzIGRpbmVkLic7DQogICAgICAgICAgICB9IGVsc2VpZiAoIXNlbGY6OmlzQWN0aW9uKCR0YWdbJ25hbWUnXSwgJHRhZ1snYWN0aW9uJ10pKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuICcnOw0KICAgICAgICAgICAgfQ0KDQogICAgICAgICAgICAkY2wgPSAkdGFnWyduYW1lJ107DQogICAgICAgICAgICB0cnkgew0KICAgICAgICAgICAgICAgIHJldHVybiAkY2w6OiR0YWdbJ2FjdGlvbiddKCR0YWcpOw0KICAgICAgICAgICAgfSBjYXRjaCAoRXhjZXB0aW9uICRlKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIFBJQ0NPTE9fU1lTVEVNX0RFQlVHID8gJGUtPmdldFRyYWNlKCkgOiAnQ2FuXCd0IGhhbmRsZSBzY3JpcHQgdGFnICInIC4gKCR0YWdbJ25hbWUnXSkgLiAnIi4gRXJyb3IgaW4gY29kZS4nOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBzZWxmOjpnZXRSZWdpc3RyZWRUeXBlQnkoJHRhZyk7IC8v0JXRgdC70Lgg0L3QtSDRg9C00LDQu9C+0YHRjCDQvtCx0YDQsNCx0L7RgtCw0YLRjCDQutCw0Log0YHQutGA0LjQv9GC0L7QstGL0Lkg0YLQtdCzLCDRgtC+0LPQtNCwINC/0YvRgtCw0LXQvNGB0Y8g0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0L/QviDRgtC40L/Rgw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCf0YvRgtCw0LXRgtGB0Y8g0L7QsdGA0LDQsdC+0YLQsNGC0Ywg0YLQtdCzINC/0L4g0LfQsNGA0LXQs9C40YHRgtGA0LjRgNC+0LLQsNC90L3QvtC80YMg0L7QsdGA0LDQsdC+0YLRh9C40LrRgw0KICAgICAqIEBwYXJhbSBhcnJheSAkdGFnINCc0LDRgdGB0LjQsiDRgdC+INC30L3QsNGH0LXQvdC40Y/QvNC4INC/0LDRgNCw0LzQtdGC0YDQvtCyINGC0LXQs9CwDQogICAgICogQHJldHVybiBzdHJpbmcg0JLQvtC30LLRgNCw0YnQsNC10YIg0LvQuNCx0L4g0L7QsdGA0LDQsdC+0YLQsNC90L3Ri9C5INGC0LXQsywg0LvQuNCx0L4g0YHQvtC+0LHRidC10L3QuNC1INC+0LEg0L7RiNC40LHQutC1IA0KICAgICAqLw0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdldFJlZ2lzdHJlZFR5cGVCeSgkdGFnKSB7DQogICAgICAgIGlmICghaXNzZXQoJHRhZ1sndHlwZSddKSB8fCAhaXNzZXQoc2VsZjo6JHR5cGVzWyR0YWdbJ3R5cGUnXV0pKSB7DQogICAgICAgICAgICByZXR1cm4gUElDQ09MT19TWVNURU1fREVCVUcgPyAoJ0NhblwndCBoYW5kbGUgdGFnJyAuIChpc3NldCgkdGFnWyd0eXBlJ10pID8gJyB0eXBlICInIC4gJHRhZ1sndHlwZSddIC4gJyIsIHJlYXNvbjogdGFnIHR5cGUgbm90IHJlZ2lzdHJlZCcgOiAnLCByZWFzb246IG5vIHR5cGUnKSkgOiAnJzsNCiAgICAgICAgfQ0KICAgICAgICAkY29kZSA9IHNlbGY6OiR0eXBlc1skdGFnWyd0eXBlJ11dOw0KICAgICAgICBpZiAoc2VsZjo6Y2hlY2tTY3JpcHQoJGNvZGUpICYmIG1ldGhvZF9leGlzdHMoJGNvZGUsICdoYW5kbGVUYWcnKSkgew0KICAgICAgICAgICAgcmV0dXJuICRjb2RlOjpoYW5kbGVUYWcoJHRhZyk7DQogICAgICAgIH0gZWxzZWlmIChQSUNDT0xPX1NZU1RFTV9ERUJVRykgew0KICAgICAgICAgICAgcmV0dXJuICdDYW5cJ3QgaGFuZGxlIHRhZyB0eXBlICInIC4gKGlzc2V0KCR0YWdbJ3R5cGUnXSkgPyAkdGFnWyd0eXBlJ10gOiAnICcpIC4gJyIsIHJlYXNvbjogbm8gbWV0aG9kIGluIGNsYXNzICInIC4gJGNvZGUgLiAnIiBvciBzY3JpcHQgbm90IGZvdW5kJzsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgIHJldHVybiAnJzsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCk0YPQvdC60YbQuNGPINC90YPQttC90LAg0LTQu9GPINC60L7RgNGA0LXQutGC0L3QvtC5INGN0LzRg9C70Y/RhtC40LggV1NFX0VOR0lORQ0KICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGC0L7Qu9GM0LrQviDRgdC+0L7QsdGJ0LXQvdC40LUg0L4g0YLQvtC8LCDRh9GC0L4g0YTRg9C90LrRhtC40Y8g0YPRgdGC0LDRgNC10LvQsA0KICAgICAqIEBkZXByZWNhdGVkINCd0LUg0L/QvtC00LTQtdGA0LbQuNCy0LDQtdGC0YHRjyDRgSDRgNCw0L3QvdC40YUg0LLQtdGA0YHQuNC5INGP0LTRgNCwIFBpY2NvbG8NCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFN5c3RlbVZhcigpIHsNCiAgICAgICAgcmV0dXJuIHNlbGY6OnRyYW5zbGF0ZSgnU1lTVEVNX1ZBUlNfREVQUkVDQVRFRCcpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCf0YDQvtCy0LXRgNGP0LXRgiDRgNCw0LfRgNC10YjQtdC90L4g0LvQuCDQvNC10YLQvtC0INCy0YvQt9GL0LLQsNGC0Ywg0LrQsNC6INC00LXQudGB0YLQstC40LUg0LTQu9GPINGC0LXQs9CwINGC0LjQv9CwIHNjcmlwdA0KICAgICAqIA0KICAgICAqIEByZXR1cm4gdHJ1ZSAtINGA0LDQt9GA0LXRiNC10L3QvjsgZmFsc2UgLSDQvdC1INGA0LDQt9GA0LXRiNC10L3Qvg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNBY3Rpb24oJHNjcmlwdCwgJG1ldGhvZCkgew0KICAgICAgICBpZiAoIXNlbGY6OmNoZWNrU2NyaXB0KCRzY3JpcHQpKSB7DQogICAgICAgICAgICByZXR1cm4gZmFsc2U7DQogICAgICAgIH0NCiAgICAgICAgJHNpbmZvID0gc2VsZjo6Z2V0U2NyaXB0SW5mbygkc2NyaXB0KTsNCiAgICAgICAgaWYgKCFpc3NldCgkc2luZm9bJ2FjdGlvbnMnXSkpIHsNCiAgICAgICAgICAgIHJldHVybiBmYWxzZTsNCiAgICAgICAgfQ0KICAgICAgICBpZiAoaXNfc3RyaW5nKCRzaW5mb1snYWN0aW9ucyddKSAmJiAkc2luZm9bJ2FjdGlvbnMnXSA9PT0gJG1ldGhvZCkgew0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCiAgICAgICAgaWYgKGlzX2FycmF5KCRzaW5mb1snYWN0aW9ucyddKSAmJiBpbl9hcnJheSgkbWV0aG9kLCAkc2luZm9bJ2FjdGlvbnMnXSkpIHsNCiAgICAgICAgICAgIHJldHVybiB0cnVlOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBmYWxzZTsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDQoNC10LPQuNGB0YLRgNC40YDRg9C10YIg0L7QsdGA0LDQsdC+0YLRh9C40Log0LTQu9GPINC+0L/RgNC10LTQtdC70LXQvdC90L7Qs9C+INGC0LjQv9CwINGC0LXQs9C+0LINCiAgICAgKiANCiAgICAgKiBAcGFyYW0gc3RyaW5nICR0YWdfdHlwZSDQl9C90LDRh9C10L3QuNC1INC/0LDRgNCw0LzQtdGC0YDQsCB0eXBlINGC0LXQs9CwINGI0LDQsdC70L7QvdCwDQogICAgICogQHBhcmFtIHN0cmluZyAkaGFuZGxlciAi0LrQu9Cw0YHRgTo60L3QsNC30LLQsNC90LjQtV/RhNGD0L3QutGG0LjQuCIgLSDQsdC10Lcg0YHQutC+0LHQvtC6Lg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gUmVnaXN0ZXJUYWdIYW5kbGVyKCR0YWdfdHlwZSwgJGhhbmRsZXIpIHsNCiAgICAgICAgc2VsZjo6JHR5cGVzWyR0YWdfdHlwZV0gPSAkaGFuZGxlcjsNCiAgICB9DQoNCiAgICAvKioNCiAgICAgKiDQodC60LDQvdC40YDRg9C10YIgJHRleHQg0L3QsCDQvdCw0LvQuNGH0LjQtSDRiNCw0LHQu9C+0L3QvdGL0YUg0YLQtdCz0L7QsiDQuCDQstGL0LfRi9Cy0LDQtdGCINC+0LHRgNCw0LHQvtGC0LrRgyDQvdCw0LnQtNC10L3QvdGL0YUg0YLQtdCz0L7Qsg0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gUHJlcGVhckhUTUwoJHRleHQpIHsNCiAgICAgICAgJHRleHQgPSBzdHJfcmVwbGFjZSgnJWluZGV4JScsIHNlbGY6OmdldEluZGV4KCksIHN0cl9yZXBsYWNlKCclYmFzZSUnLCBzZWxmOjpnZXRVUkxfQkFTRSgpLCBzdHJfcmVwbGFjZSgnJXVybCUnLCBzZWxmOjpnZXRVUkwoKSwgc3RyX3JlcGxhY2UoJyV0bXBsX3Jvb3QlJywgJyViYXNlJScgLiBQSUNDT0xPX1RFTVBMQVRFU19VUkwsICR0ZXh0KSkpKTsNCiAgICAgICAgJHRleHRfcmVwbHkgPSAnJzsNCiAgICAgICAgcHJlZ19tYXRjaF9hbGwoJ3w8Y29udGVudCAoLiopLz58VScsICR0ZXh0LCAkdGV4dF9yZXBseSwgUFJFR19TUExJVF9OT19FTVBUWSk7DQogICAgICAgIGZvcmVhY2ggKCR0ZXh0X3JlcGx5WzFdIGFzICRudW0gPT4gJGFyZ3MpIHsNCiAgICAgICAgICAgIHByZWdfbWF0Y2hfYWxsKCd8KC4qKT1bIlwnXSguKilbIlwnXXxVJywgJGFyZ3MsICR0ZXh0X3JlcCwgUFJFR19TUExJVF9OT19FTVBUWSk7DQogICAgICAgICAgICBmb3JlYWNoICgkdGV4dF9yZXBbMF0gYXMgJHZhbHVlKSB7DQogICAgICAgICAgICAgICAgJHRhZ190bXAgPSBleHBsb2RlKCc9JywgdHJpbSgkdmFsdWUpKTsNCiAgICAgICAgICAgICAgICBpZiAoaXNzZXQoJHRhZ190bXBbMV0pKSB7DQogICAgICAgICAgICAgICAgICAgICR0YWdbJHRhZ190bXBbMF1dID0gc3RyX3JlcGxhY2UoJ1wnJywgJycsIHN0cl9yZXBsYWNlKCciJywgJycsICR0YWdfdG1wWzFdKSk7DQogICAgICAgICAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICAgICAgICAgJHRhZ1skdGFnX3RtcFswXV0gPSB0cnVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICR0ZXh0ID0gc3RyX3JlcGxhY2UoJHRleHRfcmVwbHlbMF1bJG51bV0sIHNlbGY6OkdldENvbnRlbnRCeVRhZygkdGFnKSwgJHRleHQpOw0KICAgICAgICAgICAgJHRhZyA9IGFycmF5KCk7DQogICAgICAgIH0NCiAgICAgICAgJHJldCA9IHN0cl9yZXBsYWNlKCclaW5kZXglJywgc2VsZjo6Z2V0SW5kZXgoKSwgc3RyX3JlcGxhY2UoJyViYXNlJScsIHNlbGY6OmdldFVSTF9CQVNFKCksIHN0cl9yZXBsYWNlKCcldXJsJScsIHNlbGY6OmdldFVSTCgpLCBzdHJfcmVwbGFjZSgnJXRtcGxfcm9vdCUnLCAnJWJhc2UlJyAuIFBJQ0NPTE9fVEVNUExBVEVTX1VSTCwgJHRleHQpKSkpOw0KICAgICAgICBpZiAoY291bnQoJHRleHRfcmVwbHlbMF0pID4gMCkgew0KICAgICAgICAgICAgJHJldCA9IHNlbGY6OlByZXBlYXJIVE1MKCRyZXQpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAkcmV0Ow0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCf0YDQvtCy0LXRgNGP0LXRgiDQvdCw0LvQuNGH0LjQtSDRhNCw0LnQu9CwINGI0LDQsdC70L7QvdCwDQogICAgICogDQogICAgICogQHJldHVybiBib29sZWFuIGZhbHNlIC0g0L3QtdGCINGE0LDQudC70LA7IHRydWUgLSDQtdGB0YLRjCDRhNCw0LnQuw0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gaXNUbXBsKCRuYW1lKSB7DQogICAgICAgIHJldHVybiBpc19maWxlKFBJQ0NPTE9fVEVNUExBVEVTX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkbmFtZSAuICcuaHRtbCcpIHx8IGlzX2ZpbGUoUElDQ09MT19URU1QTEFURVNfRElSIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICdzY3JpcHRzJyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkbmFtZSAuICcuaHRtbCcpOw0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCS0L7Qt9Cy0YDQsNGJ0LDQtdGCINGB0L7QtNC10YDQttC40LzQvtC1INGE0LDQudC70LAg0YjQsNCx0LvQvtC90LANCiAgICAgKiANCiAgICAgKiBAcGFyYW0gc3RyaW5nICRuYW1lINCd0LDQt9Cy0LDQvdC40LUg0YTQsNC50LvQsCDRiNCw0LHQu9C+0L3QsA0KICAgICAqIEByZXR1cm4gc3RyaW5nINCh0L7QtNC10YDQttC40LzQvtC1INGE0LDQudC70LAg0YjQsNCx0LvQvtC90LAsINC70LjQsdC+INC70L7QutCw0LvQuNC30LjRgNC+0LLQsNC90L3QvtC1INGB0L7QvtCx0YnQtdC90LjQtSDQvtCxINC+0YjQuNCx0LrQtQ0KICAgICAqLw0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gZ2V0VG1wbCgkbmFtZSkgew0KICAgICAgICBpZiAoaXNfZmlsZShQSUNDT0xPX1RFTVBMQVRFU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJG5hbWUgLiAnLmh0bWwnKSkgew0KICAgICAgICAgICAgcmV0dXJuIGZpbGVfZ2V0X2NvbnRlbnRzKFBJQ0NPTE9fVEVNUExBVEVTX0RJUiAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkbmFtZSAuICcuaHRtbCcpOw0KICAgICAgICB9IGVsc2VpZiAoaXNfZmlsZShQSUNDT0xPX1RFTVBMQVRFU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ3NjcmlwdHMnIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRuYW1lIC4gJy5odG1sJykpIHsNCiAgICAgICAgICAgIHJldHVybiBmaWxlX2dldF9jb250ZW50cyhQSUNDT0xPX1RFTVBMQVRFU19ESVIgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJ3NjcmlwdHMnIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRuYW1lIC4gJy5odG1sJyk7DQogICAgICAgIH0gZWxzZWlmIChQSUNDT0xPX1NZU1RFTV9ERUJVRykgew0KICAgICAgICAgICAgcmV0dXJuIHNlbGY6OnRyYW5zbGF0ZSgnVE1QTF9OT1RfRk9VTkQnKTsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8qKg0KICAgICAqINCS0YvQt9GL0LLQsNC10YIg0L7QsdGA0LDQsdC+0YLQutGDINC60LDQttC00L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0LzQsNGB0YHQuNCy0LAg0YTRg9C90LrRhtC40LXQuSBnZXRSVG1wbCANCiAgICAgKiDQktC+0LfQstGA0LDRidCw0LXRgiDRgdC+0LTQtdGA0LbQuNC80L7QtSDRhNCw0LnQu9CwINGI0LDQsdC70L7QvdCwINGBINC30LDQvNC10L3QtdC90L3Ri9C80Lgg0L/QtdGA0LXQvNC10L3QvdGL0LzQuCDQsiDQvNCw0YHRgdC40LLQtSAkYXJyDQogICAgICogDQogICAgICogQHBhcmFtIHN0cmluZyAkdGVtcGxhdGUg0L3QsNC30LLQsNC90LjQtSDRiNCw0LHQu9C+0L3QsA0KICAgICAqIEBwYXJhbSBhcnJheSAkZGF0YSDQvNCw0YHRgdC40LIg0YEg0LTQsNC90L3Ri9C80Lgg0LTQu9GPINC+0LHRgNCw0LHQvtGC0LrQuA0KICAgICAqIEBwYXJhbSBzdHJpbmcgJGluZGV4X25hbWUgINC90LDQt9Cy0LDQvdC40LUg0LjQvdC00LXQutGB0LAg0L/RgNC4INC/0LXRgNC10LTQsNGH0LUg0L3QsCDQvtCx0YDQsNCx0L7RgtC60YM7INC10YHQu9C4INC/0LDRgNCw0LzQtdGC0YAg0YHQvtC+0YLQstC10YLRgdGC0LLRg9C10YIgbnVsbCwg0YLQviDQuNC90LTQtdC60YEg0L3QtSDQv9C10YDQtdC00LDQtdGC0YHRjw0KICAgICAqIEBwYXJhbSBzdHJpbmcgJHN0cl9kYXRhX25hbWUg0LIg0LrQsNC60YPRjiDRj9GH0LXQudC60YMg0L/QvtC80LXRgdGC0LjRgtGMINC00LDQvdC90YvQtSwg0LXRgdC70Lgg0Y3RgtC+INC90LUg0LzQsNGB0YHQuNCyDQogICAgICogQHBhcmFtIGJvb2xlYW4gJHN0cl9yZXQg0YDQtdC30YPQu9GM0YLQsNGCINGA0LDQsdC+0YLRizsgdHJ1ZSAtINGB0YLRgNC+0LrQsCwgZmFsc2UgLSDQvNCw0YHRgdC40LINCiAgICAgKiBAcGFyYW0gJGZyb20g0YEg0LrQsNC60L7Qs9C+INGN0LvQtdC80LXQvdGC0LAg0LzQsNGB0YHQuNCy0LAg0L3QsNGH0LDRgtGMINC+0LHRgNCw0LHQvtGC0LrRgw0KICAgICAqIEBwYXJhbSAkY291bnQg0YHQutC+0LvRjNC60L4g0Y3Qu9C10LzQtdC90YLQvtCyINC80LDRgdGB0LjQstCwINC+0LHRgNCw0LHQsNGC0YvQstCw0YLRjA0KICAgICAqIEByZXR1cm4gbWl4ZWQg0JIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCDQvtGCINC/0LDRgNCw0LzQtdGC0YDQsCAkc3RyX3JldCDQvNC+0LbQtdGCINCy0L7Qt9Cy0YDQsNGJ0LDRgtGMINC60LDQuiDRgdGC0YDQvtC60YMsINGC0LDQuiDQuCDQvNCw0YHRgdC40LIuICjQn9C+INGD0LzQvtC70YfQsNC90LjRjiAkc3RyX3JldCA9IHRydWUpDQogICAgICovDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBnZXRNVG1wbCgkdGVtcGxhdGUsICRkYXRhLCAkZGF0YV9wcmVzZXQsICRpbmRleF9uYW1lID0gJ2luZGV4JywgJHN0cl9kYXRhX25hbWUgPSAnZGF0YScsICRzdHJfcmV0ID0gdHJ1ZSwgJGZyb20gPSBudWxsLCAkY291bnQgPSBudWxsKSB7DQoNCiAgICAgICAgaWYgKCRmcm9tICE9PSBudWxsKSB7DQogICAgICAgICAgICBhcnJheV9zbGljZSgkZGF0YSwgJGZyb20sICRjb3VudCwgdHJ1ZSk7DQogICAgICAgIH0NCg0KICAgICAgICBpZiAoIXNlbGY6OmlzVG1wbCgkdGVtcGxhdGUpKSB7DQogICAgICAgICAgICByZXR1cm4gc2VsZjo6dHJhbnNsYXRlKCdNVUxUSV9URU1QTEFURV9OT1RfRk9VTkQnKTsNCiAgICAgICAgfQ0KICAgICAgICAkcmV0dXJuID0gJHN0cl9yZXQgPyAnJyA6IGFycmF5KCk7DQogICAgICAgIGZvcmVhY2ggKCRkYXRhIGFzICRpbmRleCA9PiAkYXJyKSB7DQogICAgICAgICAgICBpZiAoaXNfc3RyaW5nKCRhcnIpKSB7DQogICAgICAgICAgICAgICAgJGFyciA9IGFycmF5KCRzdHJfZGF0YV9uYW1lID0+ICRhcnIpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgJGFyciA9ICgkaW5kZXhfbmFtZSA9PT0gbnVsbCA/IGFycmF5KCkgOiBhcnJheSgkaW5kZXhfbmFtZSA9PiAkaW5kZXgpKSArICRhcnIgKyAkZGF0YV9wcmVzZXQ7DQogICAgICAgICAgICBpZiAoJHN0cl9yZXQpIHsNCiAgICAgICAgICAgICAgICAkcmV0dXJuIC49IHNlbGY6OmdldFJUbXBsKCR0ZW1wbGF0ZSwgJGFycik7DQogICAgICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgICAgICAgICRyZXR1cm5bXSA9IHNlbGY6OmdldFJUbXBsKCR0ZW1wbGF0ZSwgJGFycik7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcmV0dXJuICRyZXR1cm47DQogICAgfQ0KDQogICAgLyoqDQogICAgICog0JLQvtC30LLRgNCw0YnQsNC10YIg0YHQvtC00LXRgNC20LjQvNC+0LUg0YTQsNC50LvQsCDRiNCw0LHQu9C+0L3QsCDRgSDQt9Cw0LzQtdC90LXQvdC90YvQvNC4INC/0LXRgNC10LzQtdC90L3Ri9C80Lgg0LIg0LzQsNGB0YHQuNCy0LUgJGFycg0KICAgICAqINCc0LDRgdGB0LjQsiAkYXJyID0gWydrZXknPT4ndmFsdWUnXQ0KICAgICAqINCh0L7QtNC10YDQttC40LzQvtC1INGE0LDQudC70LAg0YjQsNCx0LvQvtC90LA6ICdba2V5XScNCiAgICAgKiDQoNC10LfRg9C70YzRgtCw0YIg0YDQsNCx0L7RgtGLINGE0YPQvdC60YbQuNC4ICd2YWx1ZScNCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFJUbXBsKCRuYW1lLCAkYXJyKSB7DQogICAgICAgIGlmICghc2VsZjo6aXNUbXBsKCRuYW1lKSkgew0KICAgICAgICAgICAgaWYgKFBJQ0NPTE9fU1lTVEVNX0RFQlVHKSB7DQogICAgICAgICAgICAgICAgcmV0dXJuIHNlbGY6OnRyYW5zbGF0ZSgnUkVQTEFDQUJMRV9URU1QTEFURV9OT1RfRk9VTkRfREVCVUdfU1RBUlQnKQ0KICAgICAgICAgICAgICAgICAgICAgICAgLiAkbmFtZQ0KICAgICAgICAgICAgICAgICAgICAgICAgLiBzZWxmOjp0cmFuc2xhdGUoJ1JFUExBQ0FCTEVfVEVNUExBVEVfTk9UX0ZPVU5EX0RFQlVHX0VORCcpOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHNlbGY6OnRyYW5zbGF0ZSgnUkVQTEFDQUJMRV9URU1QTEFURV9OT1RfRk9VTkQnKTsNCiAgICAgICAgfSBlbHNlIHsNCiAgICAgICAgICAgICRyZXR1cm4gPSBzZWxmOjpnZXRUbXBsKCRuYW1lKTsNCiAgICAgICAgICAgIGlmICghaXNfYXJyYXkoJGFycikpIHsNCiAgICAgICAgICAgICAgICByZXR1cm4gJHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvcmVhY2ggKCRhcnIgYXMgJGNvZGUgPT4gJHZhbCkgew0KICAgICAgICAgICAgICAgIGlmIChpc19hcnJheSgkY29kZSkgfHwgaXNfYXJyYXkoJHZhbCkpIHsNCiAgICAgICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgICAgICRyZXR1cm4gPSBzdHJfcmVwbGFjZSgnWycgLiAkY29kZSAuICddJywgJHZhbCwgJHJldHVybik7DQogICAgICAgICAgICB9DQogICAgICAgICAgICByZXR1cm4gJHJldHVybjsNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8v0KDQsNCx0L7RgtCwINGBINGB0L7QsdGL0YLQuNGP0LzQuA0KDQogICAgLyoqDQogICAgICog0KTRg9C90LrRhtC40Y8g0LLRi9C30YvQstCw0LXRgiDQvtCx0YDQsNCx0L7RgtC60YMg0YHQvtCx0YvRgtC40Y8g0L/QviDQtdCz0L4gItC40LTQtdC90YLQuNGE0LjQutCw0YLQvtGA0YMiDQogICAgICogDQogICAgICogQHBhcmFtIHN0cmluZyAkZXZlbnRfc3RyINC40LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINGB0L7QsdGL0YLQuNGPDQogICAgICogQHBhcmFtIG1peGVkICRkYXRhINC00L7Qv9C+0LvQvdC40YLQtdC70YzQvdGL0LUg0LTQsNC90L3Ri9C1INC00LvRjyDQvtCx0YDQsNCx0L7RgtGH0LjQutC+0LINCiAgICAgKi8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG9uRXZlbnQoJGV2ZW50X3N0ciwgJGRhdGEgPSBudWxsKSB7DQogICAgICAgICRzY3JpcHRzID0gc2VsZjo6Z2V0QWxsU2NyaXB0c0luZm8oKTsNCiAgICAgICAgZm9yZWFjaCAoJHNjcmlwdHMgYXMgJGNsYXNzID0+ICRpbmZvKSB7DQogICAgICAgICAgICBpZiAoIWlzc2V0KCRpbmZvWydldmVudHMnXSkpIHsNCiAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgIH0vL9CV0YHQu9C4INGN0LLQtdC90YLRiyDQvdC1INGD0LrQsNC30LDQvdGLDQogICAgICAgICAgICBpZiAoaXNfc3RyaW5nKCRpbmZvWydldmVudHMnXSkgJiYgJGluZm9bJ2V2ZW50cyddICE9PSAkZXZlbnRfc3RyKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9Ly/QldGB0LvQuCDQsiDRjdCy0LXQvdGC0LDRhSDRgdGC0YDQvtC60LAg0Lgg0YLQsCDQvdC1INC/0L7QtNGF0L7QtNC40YINCiAgICAgICAgICAgIGVsc2VpZiAoaXNfYXJyYXkoJGluZm9bJ2V2ZW50cyddKSAmJiAhaW5fYXJyYXkoJGV2ZW50X3N0ciwgJGluZm9bJ2V2ZW50cyddKSkgew0KICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgfS8v0JXRgdC70Lgg0LIg0LzQsNGB0YHQuNCy0LUg0YEg0Y3QstC10L3RgtCw0LzQuCDQvdC10YIg0L3QsNGI0LXQs9C+DQogICAgICAgICAgICBpZiAoIW1ldGhvZF9leGlzdHMoJGNsYXNzLCAnb25FdmVudCcpKSB7DQogICAgICAgICAgICAgICAgY29udGludWU7DQogICAgICAgICAgICB9Ly/QldGB0LvQuCDQvdC10YIg0LzQtdGC0L7QtNCwINC00LvRjyDQvtCx0YDQsNCx0L7RgtC60Lgg0Y3QstC10L3RgtCwDQogICAgICAgICAgICAkY2xhc3M6Om9uRXZlbnQoJGV2ZW50X3N0ciwgJGRhdGEpOyAvL9Cf0LXRgNC10LTQsNC10Lwg0L3QsCDQvtCx0YDQsNCx0L7RgtC60YMNCiAgICAgICAgfQ0KICAgIH0NCg0KICAgIC8v0JLRi9Cy0L7QtCDRgtCw0LnQvNC40L3Qs9C+0LINCiAgICBwcml2YXRlIHN0YXRpYyAkYXV0b2xvYWQgPSAwOw0KDQogICAgLyoNCiAgICAgKiDQktGL0LLQvtC00LjRgiDQvtGC0LvQsNC00L7Rh9C90YPRjiDQuNC90YTQvtGA0LzQsNGG0LjRjg0KICAgICAqLw0KDQogICAgcHJpdmF0ZSBzdGF0aWMgZnVuY3Rpb24gcHJpbnRUaW1pbmdzKCkgew0KICAgICAgICBpZiAoUElDQ09MT19TWVNURU1fREVCVUcpIHsNCiAgICAgICAgICAgIGVjaG8gIjwhLS0gcGFnZSBnZW5lcmF0aW9uIHRpbWU6ICIgLiAocm91bmQoKG1pY3JvdGltZSh0cnVlKSAtIFBJQ0NPTE9fU1RBUlRfTUlDUk9USU1FKSAqIDEwMDApKSAuICJtc1xyXG4iDQogICAgICAgICAgICAuICIgc2NyaXB0cyBhdXRvbG9hZCB0aW1lOiAiIC4gc2VsZjo6JGF1dG9sb2FkIC4gIm1zXHJcbiINCiAgICAgICAgICAgIC4gIm1lbW9yeSB1c2VkOiAiIC4gcm91bmQobWVtb3J5X2dldF9wZWFrX3VzYWdlKCkgLyAxMDI0IC8gMTAyNCwgMikgLiAiIE1CIg0KICAgICAgICAgICAgLiAiY29yZSBidWlsZDogIi5QSUNDT0xPX0NPUkVfQlVJTEQNCiAgICAgICAgICAgIC4gIi0tPiI7DQogICAgICAgIH0NCiAgICB9DQoNCiAgICBwcml2YXRlIHN0YXRpYyBmdW5jdGlvbiBzZWxmVXBkYXRlKCkgew0KICAgICAgICAkZGF0ZSA9IGlzX2ZpbGUoJ2NvcmVfdXBkYXRlLnR4dCcpID8gZmlsZV9nZXRfY29udGVudHMoJ2NvcmVfdXBkYXRlLnR4dCcpIDogMDsNCiAgICAgICAgaWYgKCgodGltZSgpIC0gJGRhdGUpIDwgODY0MDApIHx8IGlzc2V0KCRfU0VTU0lPTlsnbm9fdXBkYXRlcyddKSkgew0KICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICB9Ly/QldGB0LvQuCDQv9C+0YHQu9C1INC/0L7RgdC70LXQtNC90LXQuSDQv9GA0L7QstC10YDQutC4XNC+0LHQvdC+0LLQu9C10L3QuNGPINC/0YDQvtGI0LvQviDQvNC10L3QtdC1IDI0INGH0LDRgdC+0LINCg0KICAgICAgICAkX1NFU1NJT05bJ25vX3VwZGF0ZXMnXSA9IHRydWU7DQogICAgICAgIA0KICAgICAgICAkdXBkYXRlc191cmwgPSAnaHR0cDovL3BpY2NvbG8udGsvY29yZS91cGRhdGVzLnBocD9nZXQ9JzsgLy/QkNC00YDQtdGBINGB0YLRgNCw0L3QuNGG0Ysg0L7QsdC90L7QstC70LXQvdC40LkNCiAgICAgICAgJHZlciA9IEBmaWxlX2dldF9jb250ZW50cygkdXBkYXRlc191cmwgLiAndmVyc2lvbicpOyAvL9Cf0L7Qu9GD0YfQsNC10Lwg0L/QvtGB0LvQtdC00L3RjtGOINCy0LXRgNGB0LjRjg0KICAgICAgICBpZiAoJHZlciA9PT0gUElDQ09MT19DT1JFX0JVSUxEIHx8ICR2ZXIgPT09IGZhbHNlKSB7Ly/QldGB0LvQuCDQstGB0ZEg0YHQvtCy0L/QsNC00LDQtdGCIC0g0L3QuNGH0LXQs9C+INC90LUg0LTQtdC70LDQtdC8DQogICAgICAgICAgICByZXR1cm47DQogICAgICAgIH0vL9CV0YHQu9C4INCy0LXRgNGB0LjRjyDQvdC1INGB0L7QstC/0LDQtNCw0LXRgg0KICAgICAgICAkbG9nID0gZmlsZV9leGlzdHMoJ2NvcmVfdXBkYXRlcy5sb2cuanNvbicpID8ganNvbl9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoJ2NvcmVfdXBkYXRlcy5sb2cuanNvbicpKSA6IGFycmF5KCk7DQogICAgICAgICRsb2dbXSA9ICdBbiB1cGRhdGUgZm91bmQhICgnIC4gUElDQ09MT19DT1JFX0JVSUxEIC4gJ3wnIC4gJHZlciAuICIpXHJcbiI7DQogICAgICAgICRmaWxlID0gZmlsZV9nZXRfY29udGVudHMoJHVwZGF0ZXNfdXJsIC4gJ2ZpbGUnKTsgLy/Qk9GA0YPQt9C40Lwg0L7QsdC90L7QstC70LXQvdC40LUNCiAgICAgICAgJGxvZ1tdID0gIlVwZGF0aW5nIGZpbGUuLi5cclxuIjsNCiAgICAgICAgZmlsZV9wdXRfY29udGVudHMoX19GSUxFX18sICRmaWxlKTsgLy/QntCx0L3QvtCy0LvRj9C10LzRgdGPDQogICAgICAgICRsb2dbXSA9ICdSZWRpcmVjdCB0byAnIC4gc2VsZjo6Z2V0VVJMKCkgLiAiXHJcbiI7DQogICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCdjb3JlX3VwZGF0ZXMubG9nLmpzb24nLCBqc29uX2VuY29kZSgkbG9nKSk7DQogICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCdjb3JlX3VwZGF0ZS50eHQnLCB0aW1lKCkpOw0KICAgICAgICBoZWFkZXIoJ0xvY2F0aW9uOiAnIC4gc2VsZjo6Z2V0VVJMKCkpOyAvL9Cf0YDQvtGB0LjQvCDQv9C+0LLRgtC+0YDQuNGC0Ywg0LfQsNC/0YDQvtGBDQogICAgfQ0KDQp9DQo=PD9waHAgDQogIA0KICAgICBpZihpc19maWxlKCdpbnN0YWxsLnBocCcpKXtoZWFkZXIoJ0xvY2F0aW9uOiBpbnN0YWxsLnBocCcpO30vL9CV0YHQu9C4INC10YHRgtGMINGD0YHRgtCw0L3QvtCy0YnQuNC6IC0g0L/QtdGA0LXRhdC+0LTQuNC8INC90LAg0L3QtdCz0L4gDQogICAgIGluY2x1ZGUgX19ESVJfXyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAncGljY29sby5waHAnOyAvL9CX0LDQs9GA0YPQttCw0LXQvCDRj9C00YDQviANCiAgICAgUElDQ09MT19FTkdJTkU6OnN0YXJ0KCk7IC8v0JfQsNC/0YPRgdC60LDQtdC8INCz0LXQvdC10YDQsNGC0L7RgCDRgdGC0YDQsNC90LjRhtGLIA0KPD9waHANCg0KICAgIGRlZmluZSgnSU5TVEFMTEVSX1dPUktTJywgbWljcm90aW1lKHRydWUpKTsNCg0KICAgIGluaV9zZXQoJ2Vycm9yX3JlcG9ydGluZycsIEVfQUxMKTsNCiAgICBpbmlfc2V0KCdkaXNwbGF5X2Vycm9ycycsIDEpOw0KICAgIGluaV9zZXQoJ2Rpc3BsYXlfc3RhcnR1cF9lcnJvcnMnLCAxKTsNCg0KICAgIC8v0KHQutGA0LjQv9GCINC00LvRjyDRgNCw0LfRgNCw0LHQvtGC0YfQuNC60L7QsiDQv9Cw0LrQtdGC0L7QsiDQv9C+0LQgQ01TIFBpY2NvbG8NCiAgICAvL9CSINC90LXQs9C+INCy0YHRgtGA0L7QtdC9INC/0YDQvtGB0YLQtdC50YjQuNC5INGD0YHRgtCw0L3QvtCy0YnQuNC6INC/0LDQutC10YLQvtCyINC4INGE0YPQvdC60YbQuNC4INC00LvRjyDRgdCx0L7RgNC60LgNCiAgICAvL9CY0YHQv9C+0LvRjNC30L7QstCw0L3QuNC1OiDQtdGB0YLRjCDQtNCy0LAg0YDQtdC20LjQvNCwIC0g0L/QvtGB0YLQvtGP0L3QvdCw0Y8g0L/QtdGA0LXRgdCx0L7RgNC60LAg0Lgg0L/QtdGA0LXRgdCx0L7RgNC60LAg0L/QviDQt9Cw0L/RgNC+0YHRgw0KICAgIC8v0LIg0L/QtdGA0LLQvtC8INGA0LXQttC40LzQtSBjbXMg0L/QvtGB0YLQvtGP0L3QvdC+INC/0LXRgNC10YHQvtCx0LjRgNCw0LXRgtGB0Y8sINCy0L4g0LLRgtC+0YDQvtC8INC/0LXRgNC10YHQsdC+0YDQutCwINC/0YDQvtC40LfQstC+0LTQuNGC0YHRjyDQv9GA0LggZ2V0LdC/0LDRgNCw0LzQtdGC0YDQtSByZWJ1aWxkPTENCiAgICAvL9CSINGE0LDQudC70LUgaW5zdGFsbC5qc29uINGD0LrQsNC30YvQstCw0LnRgtC1INC/0LDQutC10YLRiyDQsiDRgtC+0Lwg0L/QvtGA0Y/QtNC60LUsINCyINC60LDQutC+0Lwg0L7QvdC4INC00L7Qu9C20L3RiyDQsdGL0YLRjCDRg9GB0YLQsNC90L7QstC70LXQvdGLLCDRgtCw0Log0LbQtSDQvdC1INC30LDQsdGL0LLQsNC50YLQtSDQv9GA0L4g0LfQsNCy0LjRgdC40LzQvtGB0YLQuA0KICAgIC8v0KLRgNC10LHQvtCy0LDQvdC40Y86INC90LDQu9C40YfQuNC1INCyINC/0LDQv9C60LUg0YTQsNC50LvQsCDRj9C00YDQsCBwaWNjb2xvLnBocA0KDQogICAgZGVmaW5lKCdBVVRPUkVCVUlMRCcsIHRydWUpOyAvL9GA0LXQttC40Lwg0L/QtdGA0LXRgdCx0L7RgNC60Lg6IHRydWUgLSDQv9C10YDQtdGB0L7QsdC40YDQsNGC0Ywg0L/RgNC4INC60LDQttC00L7QvCDQt9Cw0L/RgNC+0YHQtSwgZmFsc2UgLSDQv9C10YDQtdGB0L7QsdC40YDQsNGC0Ywg0YLQvtC70YzQutC+INC/0L4g0YHQv9C10YYuINC30LDQv9GA0L7RgdGDIChHRVQ6IHJlYnVpbGQ9MSkNCg0KICAgIGlmKGlzX2ZpbGUoJ3BpY2NvbG8ucGhwJykpey8v0J/QvtC00LrQu9GO0YfQsNC10Lwg0Y/QtNGA0L4NCiAgICAgICAgaW5jbHVkZSAncGljY29sby5waHAnOw0KICAgIH1lbHNlew0KICAgICAgICBkaWUoJ9Cd0LUg0L3QsNC50LTQtdC9INGE0LDQudC7INGP0LTRgNCwJyk7DQogICAgfQ0KDQogICAgJGMgPSBudWxsOyAvL9Ch0YfQtdGC0YfQuNC6INGD0YHRgtCw0L3QvtCy0LvQtdC90L3Ri9GFINC/0LDQutC10YLQvtCyDQogICAgaWYoQVVUT1JFQlVJTEQgfHwgZmlsdGVyX2lucHV0KElOUFVUX0dFVCwgJ3JlYnVpbGQnKSA9PSAnMScpey8v0J/QtdGA0LXRgdCx0L7RgNC60LAsINC10YHQu9C4INC90LDQtNC+DQogICAgICAgICRjID0gMDsNCiAgICAgICAgaWYoIWlzX2ZpbGUoJ3BhY2thZ2VzJyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnaW5zdGFsbC5qc29uJykpew0KICAgICAgICAgICAgcHJpbnQoJ9Cd0LUg0L3QsNC50LTQtdC9INGE0LDQudC7IGluc3RhbGwuanNvbicpOw0KICAgICAgICB9DQogICAgICAgICRpID0ganNvbl9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoJ3BhY2thZ2VzJyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAnaW5zdGFsbC5qc29uJyksIHRydWUpOw0KICAgICAgICAkbG9nID0gJyc7DQogICAgICAgIGZvcmVhY2goJGkgYXMgJHBhY2spew0KICAgICAgICAgICAgJGxvZyAuPSAnXHJcbtCj0YHRgtCw0L3QvtCy0LrQsCDQv9Cw0LrQtdGC0LAgIicgLiAkcGFja1sncGF0aCddIC4gJyJcclxuJzsNCiAgICAgICAgICAgICRpbnN0YWxsZXIgPSBuZXcgcGljY29sb19wYWNrYWdlX2luc3RhbGxlcigNCiAgICAgICAgICAgICAgICAgICAgUElDQ09MT19ST09UX0RJUiwgUElDQ09MT19DT05GSUdTX0RJUiwgUElDQ09MT19URU1QTEFURVNfRElSLCBQSUNDT0xPX1NDUklQVFNfRElSLCBQSUNDT0xPX1RSQU5TTEFUSU9OU19ESVIsICdwYWNrYWdlcycgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHBhY2tbJ3BhdGgnXSwgJHBhY2tbJ2luZm8nXQ0KICAgICAgICAgICAgKTsNCiAgICAgICAgICAgICRpbnN0YWxsZXItPmZ1bGxJbnN0YWxsKCk7DQogICAgICAgICAgICAkbG9nIC49ICRpbnN0YWxsZXItPmdldExvZygpOw0KICAgICAgICAgICAgJGMrKzsNCiAgICAgICAgfQ0KICAgIH0NCiAgICB1bmxpbmsoX19GSUxFX18pOy8v0KHQsNC80L7Rg9C90LjRh9GC0L7QttC10L3QuNC1INC/0L7RgdC70LUg0YPRgdGC0LDQvdC+0LLQutC4DQogICAgcmVtb3ZlRGlyKF9fRElSX18uRElSRUNUT1JZX1NFUEFSQVRPUi4ncGFja2FnZXMnKTsNCiAgICBoZWFkZXIoJ0xvY2F0aW9uOiAnLlBJQ0NPTE9fRU5HSU5FOjpnZXRVUkxfQkFTRSgpKTsNCiAgICBkaWUoKTsNCiAgIA0KICAgIGZ1bmN0aW9uIHJlbW92ZURpcigkZGlyKXsNCiAgICAgICAgZm9yZWFjaChzY2FuZGlyKCRkaXIpIGFzICRmaWxlKXsNCiAgICAgICAgICAgIGlmKCRmaWxlID09ICcuJyB8fCAkZmlsZSA9PSAnLi4nKXtjb250aW51ZTt9DQogICAgICAgICAgICBpZihpc19maWxlKCRkaXIuRElSRUNUT1JZX1NFUEFSQVRPUi4kZmlsZSkpew0KICAgICAgICAgICAgICAgIHVubGluaygkZGlyLkRJUkVDVE9SWV9TRVBBUkFUT1IuJGZpbGUpOw0KICAgICAgICAgICAgfWVsc2VpZihpc19kaXIoJGRpci5ESVJFQ1RPUllfU0VQQVJBVE9SLiRmaWxlKSl7DQogICAgICAgICAgICAgICAgcmVtb3ZlRGlyKCRkaXIuRElSRUNUT1JZX1NFUEFSQVRPUi4kZmlsZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCiAgICAgICAgcm1kaXIoJGRpcik7DQogICAgfQ0KICAgIA0KICAgIC8qDQogICAgICog0JrQu9Cw0YHRgSDQv9GA0L7QstC+0LTQuNGCICLRgtGD0L/Rg9GOIiDRg9GB0YLQsNC90L7QstC60YMg0L/QsNC60LXRgtCwLg0KICAgICAqINCe0L0g0L3QtSDQv9GA0L7QstC10YDRj9C10YIg0LfQsNCy0LjRgdC40LzQvtGB0YLQuCwg0YHQvtCy0LzQtdGB0YLQuNC80L7RgdGC0Ywg0Lgg0L3QsNC70LjRh9C40LUg0YPQttC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L3QvtC5INCy0LXRgNGB0LjQuC4NCiAgICAgKiDQmNC00LXRgiDQv9GA0L7RgdGC0L7QtSDQutC+0L/QuNGA0L7QstCw0L3QuNC1INGE0LDQudC70L7QsiDQsiDQvdGD0LbQvdGL0LUg0L/QsNC/0LrQuCDQuCDQuNGFINC80L7QtNC40YTQuNC60LDRhtC40Y8g0L/RgNC4INC90LXQvtCx0YXQvtC00LjQvNC+0YHRgtC4DQogICAgICovDQoNCiAgICBjbGFzcyBwaWNjb2xvX3BhY2thZ2VfaW5zdGFsbGVyIHsNCiAgICAgICAgLyoNCiAgICAgICAgICog0JrQvtC90YHRgtGA0YPQutGC0L7RgCDQutC70LDRgdGB0LAuDQogICAgICAgICAqINCf0YDQuNC90LjQvNCw0LXRgiDQv9Cw0YDQsNC80LXRgtGA0Ys6INC/0LDQv9C60LAg0YEg0LrQvtC90YTQuNCz0LDQvNC4LCDQv9Cw0L/QutCwINGBINGI0LDQsdC70L7QvdCw0LzQuCwg0L/QsNC/0LrQsCDRgdC+INGB0LrRgNC40L/RgtCw0LzQuCwg0L/QsNC/0LrQsCDRgSDQu9C+0LrQsNC70LjQt9Cw0YbQuNGP0LzQuCwg0L/QsNC/0LrQsCDRgSDQv9Cw0LrQtdGC0L7QvCwg0L3QsNC30LLQsNC90LjQtSDRhNCw0LnQu9CwINGBINC+0L/QuNGB0LDQvdC40LXQvCDRgNC10L/QvtC30LjRgtC+0YDQuNGPDQogICAgICAgICAqLw0KDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBfX2NvbnN0cnVjdCgkcm9vdCwgJGNvbmZpZ3NfZGlyLCAkdGVtcGxhdGVzX2RpciwgJHNjcmlwdHNfZGlyLCAkbG9jYWxlc19kaXIsICRwYWNrYWdlX2RpciwgJGluZm9fbmFtZSwgJGJhY2t1cCA9IGZhbHNlKXsNCiAgICAgICAgICAgICR0aGlzLT5yb290ID0gcnRyaW0oJHJvb3QsIERJUkVDVE9SWV9TRVBBUkFUT1IpOw0KICAgICAgICAgICAgJHRoaXMtPmNmZyA9IHJ0cmltKCRjb25maWdzX2RpciwgRElSRUNUT1JZX1NFUEFSQVRPUik7DQogICAgICAgICAgICAkdGhpcy0+dG1wbCA9IHJ0cmltKCR0ZW1wbGF0ZXNfZGlyLCBESVJFQ1RPUllfU0VQQVJBVE9SKTsNCiAgICAgICAgICAgICR0aGlzLT5zY3IgPSBydHJpbSgkc2NyaXB0c19kaXIsIERJUkVDVE9SWV9TRVBBUkFUT1IpOw0KICAgICAgICAgICAgJHRoaXMtPmxjID0gcnRyaW0oJGxvY2FsZXNfZGlyLCBESVJFQ1RPUllfU0VQQVJBVE9SKTsNCiAgICAgICAgICAgICR0aGlzLT5wY2tnID0gcnRyaW0oJHBhY2thZ2VfZGlyLCBESVJFQ1RPUllfU0VQQVJBVE9SKTsNCiAgICAgICAgICAgICR0aGlzLT5iYWNrdXAgPSAkYmFja3VwOw0KCQkJJHRoaXMtPmxvZygnTG9hZGluZyAnLiRpbmZvX25hbWUpOw0KICAgICAgICAgICAgJHRoaXMtPmluZm8gPSBqc29uX2RlY29kZShmaWxlX2dldF9jb250ZW50cygkdGhpcy0+cGNrZyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkaW5mb19uYW1lKSwgdHJ1ZSk7DQogICAgICAgIH0NCg0KICAgICAgICAvL9Cf0LDRgNCw0LzQtdGC0YDRiyDQutC+0L3RgdGC0YDRg9C60YLQvtGA0LANCiAgICAgICAgcHJpdmF0ZSAkcm9vdCwgJGNmZywgJHRtcGwsICRzY3IsICRsYywgJHBja2csICRpbmZvLCAkYmFja3VwOw0KICAgICAgICBwcml2YXRlICRsb2cgPSAnJzsgLy/Qn9C10YDQtdC80LXQvdC90LDRjyDQtNC70Y8g0YXRgNCw0L3QtdC90LjRjyDQu9C+0LPQsCDRg9GB0YLQsNC90L7QstC60LgNCg0KICAgICAgICAvKg0KICAgICAgICAgKiDQn9GA0L7QstC+0LTQuNGCINC/0L7Qu9C90YPRjiDRg9GB0YLQsNC90L7QstC60YMg0L/QsNC60LXRgtCwDQogICAgICAgICAqLw0KDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBmdWxsSW5zdGFsbCgpew0KICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dRnVsbCBpbnN0YWxsIGNhbGxlZCcpOw0KICAgICAgICAgICAgJHRoaXMtPmJlZm9yZV9pbnN0YWxsKCk7DQogICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11DYWxsaW5nIHJvb3QgZmlsZXMgaW5zdGFsbGF0aW9uLi4uJyk7DQogICAgICAgICAgICAkdGhpcy0+aW5zdGFsbFJvb3QoKTsNCiAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXVJvb3QgZmlsZXMgaW5zdGFsbGF0aW9uIGNhbGwgZG9uZSEnKTsNCiAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXUNhbGxpbmcgY29uZmlncyBpbnN0YWxsYXRpb24uLi4nKTsNCiAgICAgICAgICAgICR0aGlzLT5pbnN0YWxsQ29uZmlncygpOw0KICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dQ29uZmlncyBpbnN0YWxsYXRpb24gY2FsbCBkb25lIScpOw0KICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dQ2FsbGluZyBsb2NhbGVzIGluc3RhbGxhdGlvbi4uLicpOw0KICAgICAgICAgICAgJHRoaXMtPmluc3RhbGxMb2NhbGVzKCk7DQogICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11Mb2NhbGVzIGluc3RhbGxhdGlvbiBjYWxsIGRvbmUhJyk7DQogICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11DYWxsaW5nIHRlbXBsYXRlcyBpbnN0YWxsYXRpb24uLi4nKTsNCiAgICAgICAgICAgICR0aGlzLT5pbnN0YWxsVGVtcGxhdGVzKCk7DQogICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11UZW1wbGF0ZXMgaW5zdGFsbGF0aW9uIGNhbGwgZG9uZSEnKTsNCiAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXUNhbGxpbmcgc2NyaXB0cyBpbnN0YWxsYXRpb24uLi4nKTsNCiAgICAgICAgICAgICR0aGlzLT5pbnN0YWxsU2NyaXB0cygpOw0KICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dU2NyaXB0cyBpbnN0YWxsYXRpb24gY2FsbCBkb25lIScpOw0KICAgICAgICAgICAgJHRoaXMtPmFmdGVyX2luc3RhbGwoKTsNCiAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXUZ1bGwgaW5zdGFsbGF0aW9uIGRvbmUhJyk7DQogICAgICAgIH0NCg0KICAgICAgICAvL9CS0YvQt9GL0LLQsNC10YLRgdGPINC00L4g0YPRgdGC0LDQvdC+0LLQutC4DQogICAgICAgIHByaXZhdGUgZnVuY3Rpb24gYmVmb3JlX2luc3RhbGwoKXsNCiAgICAgICAgICAgIGlmKGlzc2V0KCR0aGlzLT5pbmZvWydiZWZvcmVfaW5zdGFsbCddKSAmJiBpc19maWxlKCR0aGlzLT5wY2tnIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICR0aGlzLT5pbmZvWydiZWZvcmVfaW5zdGFsbCddKSl7DQogICAgICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dImJlZm9yZV9pbnN0YWxsIiBmb3VuZCwgY2FsbGluZy4uLicpOw0KICAgICAgICAgICAgICAgIGluY2x1ZGUoJHRoaXMtPnBja2cgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHRoaXMtPmluZm9bJ2JlZm9yZV9pbnN0YWxsJ10pOw0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXSJiZWZvcmVfaW5zdGFsbCIgZG9uZSEnKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgLy/QktGL0LfRi9Cy0LDQtdGC0YHRjyDQv9C+0YHQu9C1INGD0YHRgtCw0L3QvtCy0LrQuA0KICAgICAgICBwcml2YXRlIGZ1bmN0aW9uIGFmdGVyX2luc3RhbGwoKXsNCiAgICAgICAgICAgIGlmKGlzc2V0KCR0aGlzLT5pbmZvWydhZnRlcl9pbnN0YWxsJ10pICYmIGlzX2ZpbGUoJHRoaXMtPnBja2cgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHRoaXMtPmluZm9bJ2FmdGVyX2luc3RhbGwnXSkpew0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXSJhZnRlcl9pbnN0YWxsIiBmb3VuZCwgY2FsbGluZy4uLicpOw0KICAgICAgICAgICAgICAgIGluY2x1ZGUoJHRoaXMtPnBja2cgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJHRoaXMtPmluZm9bJ2FmdGVyX2luc3RhbGwnXSk7DQogICAgICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dImFmdGVyX2luc3RhbGwiIGRvbmUhJyk7DQogICAgICAgICAgICB9ICAgICAgICAgICAgDQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIC8qDQogICAgICAgICAqINCg0LXQutGD0YDRgdC40LLQvdC+INC+0LHRitC10LTQtdC90Y/QtdGCINC00LLQsCDQvNCw0YHRgdC40LLQsCDRgSDRgdC+0YXRgNCw0L3QtdC90LjQtdC8INC40YHRhdC+0LTQvdGL0YUg0LTQsNC90L3Ri9GFINCyINC/0LXRgNCy0L7QvCDQvNCw0YHRgdC40LLQtQ0KICAgICAgICAgKi8NCg0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gbWVyZ2VfYXJyYXkoJGFycjEsICRhcnIyKXsNCiAgICAgICAgICAgIGZvcmVhY2goJGFycjIgYXMgJGtleSA9PiAkdmFsdWUpew0KICAgICAgICAgICAgICAgIGlmKCFpc3NldCgkYXJyMVska2V5XSkpew0KICAgICAgICAgICAgICAgICAgICAkYXJyMVska2V5XSA9ICR2YWx1ZTsNCiAgICAgICAgICAgICAgICB9ZWxzZWlmKGlzX2FycmF5KCRhcnIxWyRrZXldKSAmJiBpc19hcnJheSgkdmFsdWUpKXsNCiAgICAgICAgICAgICAgICAgICAgJGFycjFbJGtleV0gPSAkdGhpcy0+bWVyZ2VfYXJyYXkoJGFycjFbJGtleV0sICR2YWx1ZSk7DQogICAgICAgICAgICAgICAgfWVsc2V7DQogICAgICAgICAgICAgICAgICAgICRhcnIxWyRrZXldID0gJHZhbHVlOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIHJldHVybiAkYXJyMTsNCiAgICAgICAgfQ0KDQogICAgICAgIC8qDQogICAgICAgICAqINCe0LHQvdC+0LLQu9GP0LXRgiDQutC+0L3RhNC40LPQuA0KICAgICAgICAgKi8NCg0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gaW5zdGFsbENvbmZpZ3MoKXsNCiAgICAgICAgICAgIGlmKCFpc3NldCgkdGhpcy0+aW5mb1snY29uZmlncyddKSB8fCAhaXNfYXJyYXkoJHRoaXMtPmluZm9bJ2NvbmZpZ3MnXSkpew0KICAgICAgICAgICAgICAgIHJldHVybjsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgIGZvcmVhY2goJHRoaXMtPmluZm9bJ2NvbmZpZ3MnXSBhcyAkZmlsZSl7DQogICAgICAgICAgICAgICAgJGZvdXQgPSAkdGhpcy0+Y2ZnIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRmaWxlWydmaWxlX291dCddOw0KICAgICAgICAgICAgICAgICRtb2RlID0gaXNzZXQoJGZpbGVbJ21vZGUnXSkgPyAkZmlsZVsnbW9kZSddIDogJ25ldyc7DQogICAgICAgICAgICAgICAgJHRoaXMtPmxvZygnVXBkYXRpbmcgY29uZmlnOiAiJyAuICRmaWxlWydmaWxlX2luJ10gLiAnIiA9PiAiJyAuICRmaWxlWydmaWxlX291dCddIC4gJyIsIG1vZGU6ICcuJG1vZGUpOw0KICAgICAgICAgICAgICAgIA0KICAgICAgICAgICAgICAgIGlmKCEkdGhpcy0+Y2hlY2tJbkZpbGUoJHRoaXMtPnBja2csIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9pbiddKSANCiAgICAgICAgICAgICAgICAgICB8fCAoJG1vZGUgPT0gJ25ldycgJiYgZmlsZV9leGlzdHMoJGZvdXQpKSl7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOy8v0L/RgNC+0L/Rg9GB0LrQsNC10LwsINC10YHQu9C4INC90LXRgiDQstGF0L7QtNC90L7Qs9C+INGE0LDQudC70LAg0LjQu9C4INGA0LXQttC40Lwg0L3QtSDQv9C+0LfQstC+0LvRj9C10YIg0L/RgNC+0LTQvtC70LbQsNGC0YwNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkaW4gPSBqc29uX2RlY29kZShmaWxlX2dldF9jb250ZW50cygkdGhpcy0+cGNrZyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9pbiddKSwgdHJ1ZSk7DQogICAgICAgICAgICAgICAgJG91dCA9IGlzX2ZpbGUoJGZvdXQpID8ganNvbl9kZWNvZGUoZmlsZV9nZXRfY29udGVudHMoJGZvdXQpLCB0cnVlKSA6IGFycmF5KCk7DQoNCiAgICAgICAgICAgICAgICBzd2l0Y2goJG1vZGUpew0KICAgICAgICAgICAgICAgICAgICBjYXNlICdtZXJnZSc6DQogICAgICAgICAgICAgICAgICAgICAgICAkaW4gPSAkdGhpcy0+bWVyZ2VfYXJyYXkoJG91dCwgJGluKTsNCiAgICAgICAgICAgICAgICAgICAgY2FzZSAncmVwbGFjZSc6IGNhc2UgJ25ldyc6DQogICAgICAgICAgICAgICAgICAgICAgICAkdGhpcy0+d3JpdGVfZmlsZSgkdGhpcy0+Y2ZnLCBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J10sIGpzb25fZW5jb2RlKCRpbikpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8qDQogICAgICAgICAqINCe0LHQvdC+0LLQu9GP0LXRgiDQu9C+0LrQsNC70LjQt9Cw0YbQuNC4DQogICAgICAgICAqLw0KDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsTG9jYWxlcygpew0KICAgICAgICAgICAgaWYoIWlzc2V0KCR0aGlzLT5pbmZvWydsb2NhbGVzJ10pIHx8ICFpc19hcnJheSgkdGhpcy0+aW5mb1snbG9jYWxlcyddKSl7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yZWFjaCgkdGhpcy0+aW5mb1snbG9jYWxlcyddIGFzICRmaWxlKXsNCiAgICAgICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11JbnN0YWxsaW5nIGxvY2FsZSBmaWxlOiAiJyAuICRmaWxlWydmaWxlX2luJ10gLiAnIiA9PiAiJyAuICRmaWxlWydmaWxlX291dCddIC4gJyInKTsNCiAgICAgICAgICAgICAgICBpZighJHRoaXMtPmNoZWNrSW5GaWxlKCR0aGlzLT5wY2tnLCBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfaW4nXSkpew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkaW4gPSBwYXJzZV9pbmlfZmlsZSgkdGhpcy0+cGNrZyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9pbiddLCB0cnVlKTsNCiAgICAgICAgICAgICAgICAkb3V0ID0gaXNfZmlsZSgkdGhpcy0+bGMgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J10pID8gcGFyc2VfaW5pX2ZpbGUoJHRoaXMtPmxjIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRmaWxlWydmaWxlX291dCddLCB0cnVlKQ0KICAgICAgICAgICAgICAgICAgICAgICAgICAgIDogYXJyYXkoKTsNCg0KICAgICAgICAgICAgICAgICRkaXIgPSBkaXJuYW1lKCR0aGlzLT5sYyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9vdXQnXSk7DQogICAgICAgICAgICAgICAgaWYoIWlzX2RpcigkZGlyKSl7DQogICAgICAgICAgICAgICAgICAgIG1rZGlyKCRkaXIsIDA3NzcsIHRydWUpOw0KICAgICAgICAgICAgICAgIH0NCiAgICAgICAgICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkdGhpcy0+bGMgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J10sICR0aGlzLT5hcnJUb0lOSSgkdGhpcy0+bWVyZ2VfYXJyYXkoJG91dCwgJGluKSkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLyoNCiAgICAgICAgICog0J7QsdC90L7QstC70Y/QtdGCINGE0LDQudC70Ysg0LIg0LrQvtGA0L3QtdCy0L7QuSDQv9Cw0L/QutC1DQogICAgICAgICAqLw0KDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsUm9vdCgpew0KICAgICAgICAgICAgaWYoIWlzc2V0KCR0aGlzLT5pbmZvWydyb290J10pIHx8ICFpc19hcnJheSgkdGhpcy0+aW5mb1sncm9vdCddKSl7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yZWFjaCgkdGhpcy0+aW5mb1sncm9vdCddIGFzICRmaWxlKXsNCg0KICAgICAgICAgICAgICAgICRmb3V0ID0gJHRoaXMtPnJvb3QgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J107DQoNCiAgICAgICAgICAgICAgICAkbW9kZSA9IGlzc2V0KCRmaWxlWydtb2RlJ10pID8gJGZpbGVbJ21vZGUnXSA6ICduZXcnOy8v0J7Qv9GA0LXQtNC10LvRj9C10Lwg0YDQtdC20LjQvCDRg9GB0YLQsNC90L7QstC60LgNCiAgICAgICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11JbnN0YWxsaW5nIHJvb3QgZmlsZTogIicgLiAkZmlsZVsnZmlsZV9pbiddIC4gJyIgPT4gIicgLiAkZmlsZVsnZmlsZV9vdXQnXSAuICciLCBtb2RlOiAnLiRtb2RlKTsNCg0KICAgICAgICAgICAgICAgIGlmKCEkdGhpcy0+Y2hlY2tJbkZpbGUoJHRoaXMtPnBja2csIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9pbiddKSl7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICRpbiA9IGZpbGVfZ2V0X2NvbnRlbnRzKCR0aGlzLT5wY2tnIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRmaWxlWydmaWxlX2luJ10pOw0KDQogICAgICAgICAgICAgICAgDQogICAgICAgICAgICAgICAgaWYoJG1vZGUgPT0gJ25ldycgJiYgIWZpbGVfZXhpc3RzKCRmb3V0KSl7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT53cml0ZV9maWxlKCR0aGlzLT5yb290LCBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J10sICRpbik7DQogICAgICAgICAgICAgICAgfWVsc2VpZigkbW9kZSA9PSAncmVwbGFjZScgJiYgZmlsZV9leGlzdHMoJGZvdXQpKXsNCiAgICAgICAgICAgICAgICAgICAgJHRoaXMtPndyaXRlX2ZpbGUoJHRoaXMtPnJvb3QsIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9vdXQnXSwgJGluKTsNCiAgICAgICAgICAgICAgICB9DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICAvKg0KICAgICAgICAgKiDQntCx0L3QvtCy0LvRj9C10YIg0YTQsNC50LvRiyDRgdC60YDQuNC/0YLQvtCyDQogICAgICAgICAqLw0KDQogICAgICAgIHB1YmxpYyBmdW5jdGlvbiBpbnN0YWxsU2NyaXB0cygpew0KICAgICAgICAgICAgaWYoIWlzc2V0KCR0aGlzLT5pbmZvWydzY3JpcHRzJ10pIHx8ICFpc19hcnJheSgkdGhpcy0+aW5mb1snc2NyaXB0cyddKSl7DQogICAgICAgICAgICAgICAgcmV0dXJuOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgZm9yZWFjaCgkdGhpcy0+aW5mb1snc2NyaXB0cyddIGFzICRmaWxlKXsNCiAgICAgICAgICAgICAgICAkZm91dCA9ICR0aGlzLT5zY3IgLiBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J107DQoNCiAgICAgICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11JbnN0YWxsaW5nIHNjcmlwdCBmaWxlOiAiJyAuICRmaWxlWydmaWxlX2luJ10gLiAnIiA9PiAiJyAuICRmaWxlWydmaWxlX291dCddIC4gJyInKTsNCg0KICAgICAgICAgICAgICAgIGlmKCEkdGhpcy0+Y2hlY2tJbkZpbGUoJHRoaXMtPnBja2csIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9pbiddKSl7DQogICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlOw0KICAgICAgICAgICAgICAgIH0NCg0KICAgICAgICAgICAgICAgICRpbiA9IGZpbGVfZ2V0X2NvbnRlbnRzKCR0aGlzLT5wY2tnIC4gRElSRUNUT1JZX1NFUEFSQVRPUiAuICRmaWxlWydmaWxlX2luJ10pOw0KDQogICAgICAgICAgICAgICAgJHRoaXMtPmNoZWNrX2ZpbGVfZGlyKCRmb3V0KTsNCg0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXVdyaXRpbmcgZmlsZSAiJyAuICRmaWxlWydmaWxlX291dCddIC4gJyIuLi4nKTsNCiAgICAgICAgICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkZm91dCwgJGluKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgfQ0KDQogICAgICAgIC8qDQogICAgICAgICAqINCe0LHQvdC+0LLQu9GP0LXRgiDRhNCw0LnQu9GLINGI0LDQsdC70L7QvdC+0LIsINGBINCx0LXQutCw0L/QsNC80LgNCiAgICAgICAgICovDQoNCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIGluc3RhbGxUZW1wbGF0ZXMoKXsNCiAgICAgICAgICAgIGlmKCFpc3NldCgkdGhpcy0+aW5mb1sndGVtcGxhdGVzJ10pIHx8ICFpc19hcnJheSgkdGhpcy0+aW5mb1sndGVtcGxhdGVzJ10pKXsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICBmb3JlYWNoKCR0aGlzLT5pbmZvWyd0ZW1wbGF0ZXMnXSBhcyAkZmlsZSl7DQogICAgICAgICAgICAgICAgJGZvdXQgPSAkdGhpcy0+dG1wbCAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9vdXQnXTsNCiAgICAgICAgICAgICAgICAkbW9kZSA9IGlzc2V0KCRmaWxlWydtb2RlJ10pID8gJGZpbGVbJ21vZGUnXSA6ICduZXcnOw0KICAgICAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXUluc3RhbGxpbmcgdGVtcGxhdGUgZmlsZTogIicgLiAkZmlsZVsnZmlsZV9pbiddIC4gJyIgPT4gIicgLiAkZmlsZVsnZmlsZV9vdXQnXSAuICciLCBtb2RlOiAnLiRtb2RlKTsNCiAgICAgICAgICAgICAgICBpZighJHRoaXMtPmNoZWNrSW5GaWxlKCR0aGlzLT5wY2tnLCBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfaW4nXSkpew0KICAgICAgICAgICAgICAgICAgICBjb250aW51ZTsNCiAgICAgICAgICAgICAgICB9DQoNCiAgICAgICAgICAgICAgICAkaW4gPSBmaWxlX2dldF9jb250ZW50cygkdGhpcy0+cGNrZyAuIERJUkVDVE9SWV9TRVBBUkFUT1IgLiAkZmlsZVsnZmlsZV9pbiddKTsNCg0KICAgICAgICAgICAgICAgICR0aGlzLT5jaGVja19maWxlX2RpcigkZm91dCk7DQoNCg0KICAgICAgICAgICAgICAgIGlmKCgkbW9kZSA9PSAnbmV3JyAmJiAhaXNfZmlsZSgkZm91dCkpIHx8ICRtb2RlID09ICdyZXBsYWNlJyl7DQogICAgICAgICAgICAgICAgICAgICR0aGlzLT53cml0ZV9maWxlKCR0aGlzLT50bXBsLCBESVJFQ1RPUllfU0VQQVJBVE9SIC4gJGZpbGVbJ2ZpbGVfb3V0J10sICRpbik7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQoNCiAgICAgICAgLyoNCiAgICAgICAgICog0J/RgNC10L7QsdGA0LDQt9GD0LXRgiDQvNCw0YHRgdC40LIg0LIg0YHRgtGA0L7QutGDINCyINGE0L7RgNC80LDRgtC1IGluaQ0KICAgICAgICAgKi8NCg0KICAgICAgICBwdWJsaWMgZnVuY3Rpb24gYXJyVG9JTkkoJGFycil7DQogICAgICAgICAgICAkaW5pID0gIiI7DQogICAgICAgICAgICBmb3JlYWNoKCRhcnIgYXMgJHNlY3Rpb24gPT4gJGFyKXsNCiAgICAgICAgICAgICAgICAkaW5pIC49ICdbJyAuICRzZWN0aW9uIC4gJ10nIC4gIlxyXG4iOw0KICAgICAgICAgICAgICAgIGZvcmVhY2goJGFyIGFzICRrZXkgPT4gJHZhbCl7DQogICAgICAgICAgICAgICAgICAgICRpbmkgLj0gJGtleSAuICc9XCcnIC4gYWRkc2xhc2hlcygkdmFsKSAuICdcJycgLiAiXHJcbiI7DQogICAgICAgICAgICAgICAgfQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuICRpbmk7DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIGZ1bmN0aW9uIGNoZWNrSW5GaWxlKCRiYXNlLCAkaW5fZmlsZSl7DQogICAgICAgICAgICBpZighaXNfZmlsZSgkYmFzZSAuICRpbl9maWxlKSl7DQogICAgICAgICAgICAgICAgJHRoaXMtPmxvZygnW2Vycm9yXU5vIGZpbGUgIicgLiAkaW5fZmlsZSAuICciJyk7DQogICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgICAgfQ0KICAgICAgICAgICAgcmV0dXJuIHRydWU7DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIGZ1bmN0aW9uIGJhY2t1cF9maWxlKCRmaWxlKXsNCiAgICAgICAgICAgIGlmKCEkdGhpcy0+YmFja3VwKXsNCiAgICAgICAgICAgICAgICByZXR1cm47DQogICAgICAgICAgICB9DQogICAgICAgICAgICAkdGhpcy0+bG9nKCdbaW5mb11CYWNrdXBpbmcgZmlsZSAiJyAuICRmaWxlIC4gJyInKTsNCiAgICAgICAgICAgICRvdXQgPSBmaWxlX2dldF9jb250ZW50cygkZmlsZSk7DQogICAgICAgICAgICBmaWxlX3B1dF9jb250ZW50cygkZmlsZSAuICdfJyAuIGRhdGUoJ2QtbS1ZX0dfaV9zJykgLiAnX2JhaycsICRvdXQpOw0KICAgICAgICB9DQoNCiAgICAgICAgcHJpdmF0ZSBmdW5jdGlvbiB3cml0ZV9maWxlKCRiYXNlLCRmaWxlLCRkYXRhKXsNCiAgICAgICAgICAgICRmb3V0ID0gJGJhc2UuJGZpbGU7DQogICAgICAgICAgICAkdGhpcy0+Y2hlY2tfZmlsZV9kaXIoJGZvdXQpOw0KICAgICAgICAgICAgJHRoaXMtPmJhY2t1cF9maWxlKCRmb3V0KTsNCiAgICAgICAgICAgICR0aGlzLT5sb2coJ1tpbmZvXVdyaXRpbmcgZmlsZSAiJyAuICRmaWxlIC4gJyIuLi4nKTsNCiAgICAgICAgICAgIGZpbGVfcHV0X2NvbnRlbnRzKCRmb3V0LCAkZGF0YSk7DQogICAgICAgIH0NCiAgICAgICAgDQogICAgICAgIHByaXZhdGUgZnVuY3Rpb24gY2hlY2tfZmlsZV9kaXIoJGZpbGUpew0KICAgICAgICAgICAgJGRpciA9IGRpcm5hbWUoJGZpbGUpOw0KICAgICAgICAgICAgaWYoIWlzX2RpcigkZGlyKSl7DQogICAgICAgICAgICAgICAgJHRoaXMtPmxvZygnW2luZm9dQ3JlYXRpbmcgZGlyZWN0b3J5ICInIC4gJGRpciAuICciLi4uJyk7DQogICAgICAgICAgICAgICAgbWtkaXIoJGRpciwgMDc3NywgdHJ1ZSk7DQogICAgICAgICAgICB9DQogICAgICAgIH0NCg0KICAgICAgICBwcml2YXRlIGZ1bmN0aW9uIGxvZygkbWVzc2FnZSl7DQogICAgICAgICAgICAkdGhpcy0+bG9nIC49ICRtZXNzYWdlIC4gJ1xyXG4nOw0KICAgICAgICB9DQoNCiAgICAgICAgcHVibGljIGZ1bmN0aW9uIGdldExvZygpew0KICAgICAgICAgICAgcmV0dXJuICR0aGlzLT5sb2c7DQogICAgICAgIH0NCg0KICAgIH0NCiAgICA=QWRkRGVmYXVsdENoYXJzZXQgVVRGLTgNClNldEVudiBUWiBFdXJvcGUvTW9zY293DQoNCnBocF92YWx1ZSBkaXNwbGF5X2Vycm9ycyAxDQpwaHBfdmFsdWUgZGlzcGxheV9zdGFydHVwX2Vycm9ycyAxDQpwaHBfdmFsdWUgZXJyb3JfcmVwb3J0aW5nIEVfQUxMDQoNCjxJZk1vZHVsZSBtb2RfcmV3cml0ZS5jPg0KIA0KICAgIFJld3JpdGVFbmdpbmUgT24gDQoNCiAgICBSZXdyaXRlQ29uZCAle1JFUVVFU1RfRklMRU5BTUV9ICEtZg0KICAgIFJld3JpdGVDb25kICV7UkVRVUVTVF9GSUxFTkFNRX0gIS1kDQogICAgUmV3cml0ZVJ1bGUgKC4qKSBpbmRleC5waHAvJDEgW0wsUVNBXSANCiANCjwvSWZNb2R1bGU+ewogICAgInJvb3QiOlsKICAgICAgICB7ImZpbGVfaW4iOiIuaHRhY2Nlc3MiLCJmaWxlX291dCI6Ii5odGFjY2VzcyJ9CiAgICBdCn0KPD9waHANCg0KDQpjbGFzcyBtY19iYW5saXN0IHsNCiAgICANCiAgICBwcml2YXRlIHN0YXRpYyAkY2ZnID0gbnVsbDsNCiAgICANCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIG9uTG9hZCgpew0KICAgICAgICBzZWxmOjokY2ZnID0gUElDQ09MT19FTkdJTkU6OmxvYWRDb25maWcoJ21jX2Jhbmxpc3QnKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBiaW5kQWRtaW5QYWdlKCl7DQogICAgICAgICRtc2cgPSAnJzsNCiAgICAgICAgaWYoZmlsdGVyX2lucHV0KElOUFVUX1BPU1QsJ2Jhbmxpc3Rfc2V0dGluZ3NfcG9zdCcpICE9PSBudWxsKXsNCiAgICAgICAgICAgIHNlbGY6OiRjZmdbJ29uX3BhZ2UnXSA9IHNlbGY6OmZpbHRlcl9pbnB1dChJTlBVVF9QT1NULCAncm93c19jb3VudCcsIDEwKTsNCiAgICAgICAgICAgIHNlbGY6OiRjZmdbJ2RidGFibGUnXSA9IHNlbGY6OmZpbHRlcl9pbnB1dChJTlBVVF9QT1NULCAndGFibGVuYW1lJywnYmFubGlzdCcpOw0KICAgICAgICAgICAgUElDQ09MT19FTkdJTkU6OnVwZGF0ZUNvbmZpZygnbWNfYmFubGlzdCcsIHNlbGY6OiRjZmcpOw0KICAgICAgICAgICAgJG1zZyA9IFBJQ0NPTE9fRU5HSU5FOjp0cmFuc2xhdGUoJ1NFVFRJTkdTX1NBVkVEJywnbWNfYmFubGlzdCcpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiBQSUNDT0xPX0VOR0lORTo6Z2V0UlRtcGwoJ21jX2Jhbmxpc3Qvc2V0dGluZ3MnLCBzZWxmOjokY2ZnICsgYXJyYXkoJ21zZyc9PiRtc2csJ29uX3BhZ2UnPT4nJywnZGJ0YWJsZSc9PicnKSk7DQogICAgfQ0KICAgIA0KICAgIA0KICAgIA0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYmluZFBhZ2UoKXsNCiAgICAgICAgcmV0dXJuIGFycmF5KCdjb250ZW50Jz0+c2VsZjo6c2hvd0xpc3QoKSk7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gc2hvd0xpc3QoJHBhcmFtcyA9IGFycmF5KCkpew0KICAgIA0KICAgICAgICAkcmVzID0gc2VsZjo6Z2V0UGFnZSgkcGFyYW1zKTsNCiAgICAgICAgDQogICAgICAgICR0YWJsZSA9IFBJQ0NPTE9fRU5HSU5FOjpnZXRNVG1wbCgnbWNfYmFubGlzdC90YWJsZV9saW5lJywgJHJlcywgYXJyYXkoJ25hbWUnPT4nJykpOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuICR0YWJsZSA9PSAnJyA/ICcnIDogUElDQ09MT19FTkdJTkU6OmdldFJUbXBsKCdtY19iYW5saXN0L3RhYmxlJywgYXJyYXkoDQogICAgICAgICAgICAnbGluZXMnPT4kdGFibGUsDQogICAgICAgICAgICAnc2NyaXB0bmFtZSc9Pl9fQ0xBU1NfXw0KICAgICAgICAgICAgKSk7DQogICAgfQ0KDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBzaG93TGluZXMoJHBhcmFtcyA9IGFycmF5KCkpew0KICAgIA0KICAgICAgICAkcmVzID0gc2VsZjo6Z2V0UGFnZSgkcGFyYW1zKTsNCiAgICAgICAgDQogICAgICAgICR0YWJsZSA9IFBJQ0NPTE9fRU5HSU5FOjpnZXRNVG1wbCgnbWNfYmFubGlzdC90YWJsZV9saW5lJywgJHJlcywgYXJyYXkoJ25hbWUnPT4nJykpOw0KICAgICAgICANCiAgICAgICAgcmV0dXJuICR0YWJsZTsNCiAgICAgICAgDQogICAgfQ0KDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBmaW5kVXNlcigpew0KICAgICAgICByZXR1cm4gUElDQ09MT19FTkdJTkU6OmdldFRtcGwoJ21jX2Jhbmxpc3QvZmluZHVzZXInKTsNCiAgICB9DQogICAgDQogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBmaW5kVXNlckFqYXgoJHBhcmFtcyl7DQogICAgICAgICRkYnRhYmxlID0gaXNzZXQoc2VsZjo6JGNmZ1snZGJ0YWJsZSddKSA/IHNlbGY6OiRjZmdbJ2RidGFibGUnXSA6ICdiYW5saXN0JzsNCiAgICAgICAgaWYoIWlzc2V0KCRwYXJhbXNbJ3VzZXJuYW1lJ10pKXtyZXR1cm4gJzAnO30NCiAgICAgICAgaWYoIVBJQ0NPTE9fRU5HSU5FOjpjaGVja1NjcmlwdCgncGljY29sb19wZG8nKSl7cmV0dXJuICdOT19QRE8nO30NCiAgICAgICAgJFBETyA9IHBpY2NvbG9fcGRvOjpnZXRQRE8oKTsNCiAgICAgICAgJHN0bXQgPSAkUERPLT5wcmVwYXJlKCdTRUxFQ1QgKiBGUk9NICcuJGRidGFibGUuJyBXSEVSRSBuYW1lPTp1c2VybmFtZSBPUkRFUiBCWSB0aW1lIERFU0MgTElNSVQgMScpOw0KICAgICAgICAkc3RtdC0+ZXhlY3V0ZShhcnJheSgnOnVzZXJuYW1lJz0+JHBhcmFtc1sndXNlcm5hbWUnXSkpOw0KICAgICAgICAkcmVzdWx0ID0gJHN0bXQtPmZldGNoQWxsKCk7DQogICAgICAgIHJldHVybiBjb3VudCgkcmVzdWx0KSA+PSAxID8gJ9CY0LPRgNC+0LogJy4kcGFyYW1zWyd1c2VybmFtZSddLicg0L3QsNGF0L7QtNC40YLRgdGPINCyINGB0L/QuNGB0LrQtSDQt9Cw0LHQu9C+0LrQuNGA0L7QstCw0L3QvdGL0YUnIDogJ9CY0LPRgNC+0LogJy4kcGFyYW1zWyd1c2VybmFtZSddLicg0L3QtSDQvdCw0LnQtNC10L0g0LIg0YHQv9C40YHQutC1INC30LDQsdC70L7QutC40YDQvtCy0LDQvdC90YvRhSc7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGdldFBhZ2UoJHBhcmFtcyl7DQogICAgICAgICRjb3VudCA9IGlzc2V0KCRwYXJhbXNbJ29uX3BhZ2UnXSkgPyAkcGFyYW1zWydvbl9wYWdlJ10gOiAoaXNzZXQoc2VsZjo6JGNmZ1snb25fcGFnZSddKSA/IHNlbGY6OiRjZmdbJ29uX3BhZ2UnXSA6IDEwKTsNCiAgICAgICAgJHBhZ2UgPSBpc3NldCgkcGFyYW1zWydwYWdlJ10pID8gJHBhcmFtc1sncGFnZSddIDogMTsNCiAgICAgICAgJGZyb20gPSAkY291bnQgKiAoJHBhZ2UtMSk7DQogICAgICAgICRkYnRhYmxlID0gaXNzZXQoc2VsZjo6JGNmZ1snZGJ0YWJsZSddKSA/IHNlbGY6OiRjZmdbJ2RidGFibGUnXSA6ICdiYW5saXN0JzsNCiAgICAgICAgDQogICAgICAgIGlmKCFQSUNDT0xPX0VOR0lORTo6Y2hlY2tTY3JpcHQoJ3BpY2NvbG9fcGRvJykpe3JldHVybiAnTk9fUERPJzt9DQogICAgICAgICRQRE8gPSBwaWNjb2xvX3Bkbzo6Z2V0UERPKCk7DQogICAgICAgICRzdG10ID0gJFBETy0+cHJlcGFyZSgnU0VMRUNUICogRlJPTSAnLiRkYnRhYmxlLicgT1JERVIgQlkgdGltZSBERVNDIExJTUlUICcuKChpbnQpICRmcm9tKS4nLCcuKChpbnQpICRjb3VudCkpOw0KICAgICAgICAkc3RtdC0+ZXhlY3V0ZSgpOw0KICAgICAgICAkcmVzdWx0ID0gJHN0bXQtPmZldGNoQWxsKCk7DQogICAgICAgICR0YWJsZSA9IGFycmF5KCk7DQogICAgICAgIGZvcmVhY2goJHJlc3VsdCBhcyAkdXNlcil7DQogICAgICAgICAgICAkdGFibGVbXSA9IHNlbGY6OmZvcm1hdFVzZXIoJHVzZXIpOw0KICAgICAgICB9DQogICAgICAgIHJldHVybiAkdGFibGU7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGZvcm1hdFVzZXIoJHVzZXIpew0KICAgICAgICByZXR1cm4gJHVzZXIgKyBhcnJheSgNCiAgICAgICAgICAgICdkYXRlJz0+ZGF0ZSgnZC1tLVkgSDppOnMnLCR1c2VyWyd0aW1lJ10pLA0KICAgICAgICAgICAgJ3RlbXBkYXRlJz0+JHVzZXJbJ3RlbXB0aW1lJ10gPT0gMCA/ICfQvdC40LrQvtCz0LTQsCcgOiBkYXRlKCdkLW0tWSBIOmk6cycsJHVzZXJbJ3RlbXB0aW1lJ10pDQogICAgICAgICk7DQogICAgfQ0KICAgIA0KICAgIHByaXZhdGUgc3RhdGljIGZ1bmN0aW9uIGZpbHRlcl9pbnB1dCgkaW5wdXQsJG5hbWUsJGRlZmF1bHQ9bnVsbCl7DQogICAgICAgICRpbnAgPSBmaWx0ZXJfaW5wdXQoJGlucHV0LCRuYW1lKTsNCiAgICAgICAgcmV0dXJuICgkaW5wID09PSBudWxsKSB8fCAoJGlucCA9PT0gJycpID8gJGRlZmF1bHQgOiAkaW5wOw0KICAgIH0NCiAgICANCn0=ewogICAgInNjcmlwdHMiOnsKICAgICAgICAibWNfYmFubGlzdCI6ewogICAgICAgICAgICAiZmlsZSI6Im1jX2Jhbmxpc3QiLAogICAgICAgICAgICAiYWRtaW5fY2F0ZWdvcnkiOiJtaW5lY3JhZnQiLAogICAgICAgICAgICAiYWRtaW5fdGl0bGUiOiLQkdCw0L3Qu9C40YHRgiIsCiAgICAgICAgICAgICJhY3Rpb25zIjpbInNob3dMaXN0Iiwic2hvd0xpbmVzIiwiZmluZFVzZXIiLCJmaW5kVXNlckFqYXgiXQogICAgICAgIH0KICAgIH0KfQ==PGgzPtCf0YDQvtCy0LXRgNC40YLRjCDQu9C+0LPQuNC9PC9oMz4NCjxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIj4NCiAgICA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtYWRkb24iPtCb0L7Qs9C40L08L3NwYW4+DQogICAgPGlucHV0IHR5cGU9InRleHQiIGlkPSJiYW5saXN0X2NoZWNrdXNlcl9pbnAiIGNsYXNzPSJmb3JtLWNvbnRyb2wiLz4NCiAgICA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtYnRuIj48YnV0dG9uIGlkPSJiYW5saXN0X2NoZWNrdXNlcl9idG4iIGNsYXNzPSJidG4gYnRuLXN1Y2Nlc3MiPtCf0YDQvtCy0LXRgNC40YLRjDwvYnV0dG9uPjwvc3Bhbj4NCjwvZGl2Pg0KPGRpdiBpZD0iYmFubGlzdF9jaGVja3VzZXJfcmVzIj48L2Rpdj4NCjxzY3JpcHQ+DQogICAgJCgnI2Jhbmxpc3RfY2hlY2t1c2VyX2J0bicpLm9uKCdjbGljaycsZnVuY3Rpb24gKCl7DQogICAgICAgICQoJyNiYW5saXN0X2NoZWNrdXNlcl9yZXMnKS5sb2FkKCclaW5kZXglP2FqYXg9MSZ0eXBlPXNjcmlwdCZuYW1lPW1jX2Jhbmxpc3QmYWN0aW9uPWZpbmRVc2VyQWpheCZ1c2VybmFtZT0nK2VuY29kZVVSSUNvbXBvbmVudCgkKCcjYmFubGlzdF9jaGVja3VzZXJfaW5wJykudmFsKCkpKTsNCiAgICB9KTsNCjwvc2NyaXB0Pg==PGRpdiBpZD0ibG9hZF9wYWdlIj4gICAgDQogICAgPGJ1dHRvbiBpZD0ibG9hZF9wYWdlX2J0biI+0JfQsNCz0YDRg9C30LjRgtGMINC10YnRkTwvYnV0dG9uPg0KPC9kaXY+ewogICAgCiAgICAicmVxdWlyZXMiOlsicGljY29sb19wZG8iXSwKICAgICJ0aXRsZSI6ItCh0L/QuNGB0L7QuiDQt9Cw0LHQu9C+0LrQuNGA0L7QstCw0L3QvdGL0YUgKG1pbmVjcmFmdCkiLAogICAgCiAgICAiY29uZmlncyI6WwogICAgICAgIHsiZmlsZV9pbiI6ImNvcmUuanNvbiIsImZpbGVfb3V0IjoicGljY29sb19jb3JlLmpzb24iLCJtb2RlIjoibWVyZ2UifQogICAgXSwKICAgIAogICAgInNjcmlwdHMiOlsKICAgICAgICB7ImZpbGVfaW4iOiJiYW5saXN0LnBocCIsImZpbGVfb3V0IjoibWNfYmFubGlzdC5waHAiLCJtb2RlIjoicmVwbGFjZSJ9CiAgICBdLAogICAgCiAgICAidGVtcGxhdGVzIjpbCiAgICAgICAgeyJmaWxlX2luIjoidGFibGUuaHRtbCIsImZpbGVfb3V0Ijoic2NyaXB0cy9tY19iYW5saXN0L3RhYmxlLmh0bWwiLCJtb2RlIjoicmVwbGFjZSJ9LAogICAgICAgIHsiZmlsZV9pbiI6InRhYmxlX2xpbmUuaHRtbCIsImZpbGVfb3V0Ijoic2NyaXB0cy9tY19iYW5saXN0L3RhYmxlX2xpbmUuaHRtbCIsIm1vZGUiOiJyZXBsYWNlIn0sCiAgICAgICAgeyJmaWxlX2luIjoiZmluZHVzZXIuaHRtbCIsImZpbGVfb3V0Ijoic2NyaXB0cy9tY19iYW5saXN0L2ZpbmR1c2VyLmh0bWwiLCJtb2RlIjoicmVwbGFjZSJ9LAogICAgICAgIHsiZmlsZV9pbiI6InNldHRpbmdzLmh0bWwiLCJmaWxlX291dCI6InNjcmlwdHMvbWNfYmFubGlzdC9zZXR0aW5ncy5odG1sIiwibW9kZSI6InJlcGxhY2UifQogICAgXQogICAgCn0KPGgzPtCe0YHQvdC+0LLQvdGL0LUg0L3QsNGB0YLRgNC+0LnQutC4INCx0LDQvdC70LjRgdGC0LA8L2gzPg0KPGZvcm0gbWV0aG9kPSJQT1NUIj4NCiAgICANCiAgICBbbXNnXQ0KICAgIA0KICAgIDxpbnB1dCB0eXBlPSJoaWRkZW4iIG5hbWU9ImJhbmxpc3Rfc2V0dGluZ3NfcG9zdCIgdmFsdWU9IjEiLz4NCiAgICANCiAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCI+DQogICAgICAgIDxzcGFuIGNsYXNzPSJpbnB1dC1ncm91cC1hZGRvbiI+0J3QsNC30LLQsNC90LjQtSDRgtCw0LHQu9C40YbRiyDQsiDQkdCUPC9zcGFuPg0KICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idGFibGVuYW1lIiBwbGFjZWhvbGRlcj0iYmFubGlzdCIgY2xhc3M9ImZvcm0tY29udHJvbCIgdmFsdWU9IltkYnRhYmxlXSIvPg0KICAgIDwvZGl2Pg0KPGJyLz4NCiAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCI+DQogICAgICAgIDxzcGFuIGNsYXNzPSJpbnB1dC1ncm91cC1hZGRvbiI+0JrQvtC7LdCy0L4g0YHRgtGA0L7QuiDQsiDRgdC/0LjRgdC60LU8L3NwYW4+DQogICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBuYW1lPSJyb3dzX2NvdW50IiBwbGFjZWhvbGRlcj0iMTAiIGNsYXNzPSJmb3JtLWNvbnRyb2wiIHZhbHVlPSJbb25fcGFnZV0iLz4NCiAgICA8L2Rpdj4NCjxici8+DQogICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9ItCh0L7RhdGA0LDQvdC40YLRjCIgY2xhc3M9ImJ0biBidG4tc3VjY2VzcyBmb3JtLWNvbnRyb2wiLz4NCg0KPC9mb3JtPg0KDQo8aHIvPg0KDQo8ZGl2IGNsYXNzPSJwYW5lbCBwYW5lbC1pbmZvIj4NCiAgICA8ZGl2IGNsYXNzPSJwYW5lbC1oZWFkaW5nIiBpZD0iYmFubGlzdF9leGFtcGxlc19oZWFkaW5nIj7QmtC+0LTRiyDQtNC70Y8g0LLRgdGC0LDQstC60LggPHNwYW4gY2xhc3M9ImdseXBoaWNvbiBnbHlwaGljb24tb3B0aW9uLWhvcml6b250YWwgcHVsbC1yaWdodCI+PC9zcGFuPjwvZGl2Pg0KICAgIDxkaXYgY2xhc3M9InBhbmVsLWJvZHkiIGlkPSJiYW5saXN0X2V4YW1wbGVzX2JvZHkiPg0KICAgICAgICDQmtC+0LQg0LTQu9GPINCy0YHRgtCw0LLQutC4INGE0L7RgNC80Ys6IDxjb2RlPiYjNjA7Y29udGVudCB0eXBlPSJzY3JpcHQiIG5hbWU9Im1jX2Jhbmxpc3QiIGFjdGlvbj0iZmluZFVzZXIiLyYjNjI7PC9jb2RlPjxici8+PGJyLz4NCiAgICAgICAg0J/RgNC40LzQtdGAINGA0LDQsdC+0YLRizoNCiAgICAgICAgPGRpdiBjbGFzcz0id2VsbCI+DQogICAgICAgICAgICA8Y29udGVudCB0eXBlPSJzY3JpcHQiIG5hbWU9Im1jX2Jhbmxpc3QiIGFjdGlvbj0iZmluZFVzZXIiLz4NCiAgICAgICAgPC9kaXY+PGJyLz48YnIvPg0KICAgICAgICDQmtC+0LQg0LTQu9GPINCy0YHRgtCw0LLQutC4INGC0LDQsdC70LjRhtGLOiA8Y29kZT4mIzYwO2NvbnRlbnQgdHlwZT0ic2NyaXB0IiBuYW1lPSJtY19iYW5saXN0IiBhY3Rpb249InNob3dMaXN0Ii8mIzYyOzwvY29kZT48YnIvPjxici8+DQogICAgICAgINCf0YDQuNC80LXRgCDRgNCw0LHQvtGC0Ys6DQogICAgICAgIDxkaXYgY2xhc3M9IndlbGwiPg0KICAgICAgICAgICAgPGNvbnRlbnQgdHlwZT0ic2NyaXB0IiBuYW1lPSJtY19iYW5saXN0IiBhY3Rpb249InNob3dMaXN0Ii8+DQogICAgICAgIDwvZGl2Pg0KICAgIDwvZGl2Pg0KPC9kaXY+DQoNCjxzY3JpcHQ+DQogICAgICAgICQoJyNiYW5saXN0X2V4YW1wbGVzX2JvZHknKS5zbGlkZVRvZ2dsZSgpOw0KICAgICQoJyNiYW5saXN0X2V4YW1wbGVzX2hlYWRpbmcnKS5vbignY2xpY2snLGZ1bmN0aW9uKCl7DQogICAgICAgICQoJyNiYW5saXN0X2V4YW1wbGVzX2JvZHknKS5zbGlkZVRvZ2dsZSgpOw0KICAgIH0pOw0KPC9zY3JpcHQ+PHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1ob3ZlciI+DQogICAgPHRoZWFkPg0KICAgICAgICA8dHI+PHRoPtCY0LPRgNC+0Lo8L3RoPjx0aD7Ql9Cw0LHQsNC90LjQuzwvdGg+PHRoPtCU0LDRgtCwINCx0LDQvdCwPC90aD48dGg+0JTQsNGC0LAg0YDQsNC30LHQsNC90LA8L3RoPjx0aD7Qn9GA0LjRh9C40L3QsCDQsdCw0L3QsDwvdGg+PC90cj4NCiAgICA8L3RoZWFkPg0KICAgIDx0Ym9keSBpZD0iYmFubGlzdF90Ym9keSI+DQogICAgICAgIFtsaW5lc10NCiAgICA8L3Rib2R5Pg0KPC90YWJsZT4NCjxidXR0b24gaWQ9ImJhbmxpc3RfbG9hZF9tb3JlIiBjbGFzcz0iZm9ybS1jb250cm9sIGJ0biBidG4tc3VjY2VzcyI+0JfQsNCz0YDRg9C30LjRgtGMINC10YnRkTwvYnV0dG9uPg0KPGJ1dHRvbiBpZD0iYmFubGlzdF9sb2FkaW5nIiBjbGFzcz0iZm9ybS1jb250cm9sIGJ0biBidG4tc3VjY2VzcyBkaXNhYmxlZCI+0JfQsNCz0YDRg9C30LrQsC4uLjwvYnV0dG9uPg0KPHNjcmlwdD4NCiAgICANCiAgICB2YXIgcGFnZSA9IDI7DQogICAgDQogICAgJCgnI2Jhbmxpc3RfbG9hZF9tb3JlJykuaGlkZSgpOw0KDQogICAgJC5nZXQoIiVpbmRleCU/YWpheD0xJnR5cGU9c2NyaXB0Jm5hbWU9bWNfYmFubGlzdCZhY3Rpb249c2hvd0xpbmVzJnBhZ2U9IitwYWdlLCBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICBpZihkYXRhICE9PSAnJyl7DQogICAgICAgICAgICAkKCcjYmFubGlzdF9sb2FkX21vcmUnKS5zaG93KCk7DQogICAgICAgIH0NCiAgICAgICAgJCgnI2Jhbmxpc3RfbG9hZGluZycpLmhpZGUoKTsNCiAgICB9KTsNCg0KDQogICAgJCgnI2Jhbmxpc3RfbG9hZF9tb3JlJykub24oJ2NsaWNrJywgZnVuY3Rpb24gKCkgew0KDQogICAgICAgICQoJyNiYW5saXN0X2xvYWRfbW9yZScpLmhpZGUoKTsNCiAgICAgICAgJCgnI2Jhbmxpc3RfbG9hZGluZycpLnNob3coKTsNCg0KICAgICAgICAkLmdldCgiJWluZGV4JT9hamF4PTEmdHlwZT1zY3JpcHQmbmFtZT1tY19iYW5saXN0JmFjdGlvbj1zaG93TGluZXMmcGFnZT0iK3BhZ2UsIGZ1bmN0aW9uIChkYXRhKSB7DQogICAgICAgICAgICAkKCcjYmFubGlzdF90Ym9keScpLmFwcGVuZChkYXRhKTsNCiAgICAgICAgICAgIHBhZ2UrKzsNCiAgICAgICAgfSk7DQogICAgICAgDQogICAgICAgIA0KICAgICAgICAkLmdldCgiJWluZGV4JT9hamF4PTEmdHlwZT1zY3JpcHQmbmFtZT1tY19iYW5saXN0JmFjdGlvbj1zaG93TGluZXMmcGFnZT0iKyhwYWdlKzEpLCBmdW5jdGlvbiAoZGF0YSkgew0KICAgICAgICAgICAgaWYoZGF0YSAhPT0gJycpew0KICAgICAgICAgICAgICAgICQoJyNiYW5saXN0X2xvYWRfbW9yZScpLnNob3coKTsNCiAgICAgICAgICAgIH0NCiAgICAgICAgICAgICQoJyNiYW5saXN0X2xvYWRpbmcnKS5oaWRlKCk7DQogICAgICAgIH0pOw0KICAgICAgICANCiAgICB9KTsNCjwvc2NyaXB0Pg0KPHRyPg0KICAgIDx0ZD5bbmFtZV08L3RkPg0KICAgIDx0ZD5bYWRtaW5dPC90ZD4NCiAgICA8dGQ+W2RhdGVdPC90ZD4NCiAgICA8dGQ+W3RlbXBkYXRlXTwvdGQ+DQogICAgPHRkPltyZWFzb25dPC90ZD4NCjwvdHI+PHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1ob3ZlciI+DQogICAgPHRib2R5Pg0KICAgICAgICBbbGluZXNdDQogICAgPC90Ym9keT4NCjwvdGFibGU+DQoNClttb3JlX2J1dHRvbl0=ewogICAgInRpdGxlIjogItCR0LjQsdC70LjQvtGC0LXQutCwINC00LvRjyDRhtC10L3RgtGA0LDQu9C40LfQvtCy0LDQvdC90L7QuSDRgNCw0LHQvtGC0Ysg0YEgUERPIiwKICAgICJjb25maWdzIjogW3sKICAgICAgICAgICAgImZpbGVfaW4iOiAicGljY29sb19jb3JlLmpzb24iLAogICAgICAgICAgICAiZmlsZV9vdXQiOiAicGljY29sb19jb3JlLmpzb24iLAogICAgICAgICAgICAibW9kZSI6ICJtZXJnZSIKICAgICAgICB9LCB7CiAgICAgICAgICAgICJmaWxlX2luIjogInBpY2NvbG9fcGRvLmpzb24iLAogICAgICAgICAgICAiZmlsZV9vdXQiOiAicGljY29sb19wZG8uanNvbiIsCiAgICAgICAgICAgICJtb2RlIjogIm5ldyIKICAgICAgICB9XSwKICAgICJzY3JpcHRzIjogW3sKICAgICAgICAgICAgImZpbGVfaW4iOiAicF9wZG8ucGhwIiwKICAgICAgICAgICAgImZpbGVfb3V0IjogInBfcGRvLnBocCIsCiAgICAgICAgICAgICJtb2RlIjogInJlcGxhY2UiCiAgICAgICAgfV0sCiAgICAidGVtcGxhdGVzIjpbCiAgICAgICAgeyJmaWxlX2luIjoic2V0dGluZ3MuaHRtbCIsImZpbGVfb3V0Ijoic2NyaXB0cy9waWNjb2xvX3Bkby9zZXR0aW5ncy5odG1sIiwibW9kZSI6InJlcGxhY2UifSwKICAgICAgICB7ImZpbGVfaW4iOiJzYXZlZC5odG1sIiwiZmlsZV9vdXQiOiJzY3JpcHRzL3BpY2NvbG9fcGRvL3NldHRpbmdzX3NhdmVkLmh0bWwiLCJtb2RlIjoicmVwbGFjZSJ9CiAgICBdCiAgICAKCn0Kew0KICAgICJzY3JpcHRzIjp7DQogICAgICAgICJwaWNjb2xvX3BkbyI6ew0KICAgICAgICAgICAgImZpbGUiOiJwX3BkbyIsDQogICAgICAgICAgICAiYWRtaW5fY2F0ZWdvcnkiOiJzeXN0ZW0iLA0KICAgICAgICAgICAgImFkbWluX3RpdGxlIjoi0L3QsNGB0YLRgNC+0LnQutC4INCx0LDQt9GLINC00LDQvdC90YvRhSINCiAgICAgICAgfQ0KICAgIH0NCn0NCg==ew0KICAgICJkc24iOiAibXlzcWw6aG9zdD1sb2NhbGhvc3Q7ZGJuYW1lPXNpdGU7Y2hhcnNldD11dGY4IiwNCiAgICAiY29ubmVjdF9pbmZvIjogew0KICAgICAgICAidXNlcm5hbWUiOiAicm9vdCIsDQogICAgICAgICJwYXNzd29yZCI6ICJyb290IiwNCiAgICAgICAgInByZWZpeCI6ICIiDQogICAgfQ0KfQ==PD9waHANCg0KZmluYWwgY2xhc3MgcGljY29sb19wZG8gew0KDQogICAgLy/QndCw0YHRgtGA0L7QudC60LggUERPINC/0L4g0YPQvNC+0LvRh9Cw0L3QuNGODQogICAgcHJpdmF0ZSBzdGF0aWMgJGRzbjsNCiAgICBwcml2YXRlIHN0YXRpYyAkY29ubmVjdF9pbmZvOw0KICAgIHByaXZhdGUgc3RhdGljICRvcHQgPSBhcnJheSgNCiAgICAgICAgICAgIFBETzo6QVRUUl9FUlJNT0RFICAgICAgICAgICAgPT4gUERPOjpFUlJNT0RFX0VYQ0VQVElPTiwNCiAgICAgICAgICAgIFBETzo6QVRUUl9ERUZBVUxUX0ZFVENIX01PREUgPT4gUERPOjpGRVRDSF9BU1NPQw0KICAgICk7DQogICAgDQogICAgcHJpdmF0ZSBzdGF0aWMgJGRiID0gbnVsbDsNCiAgICANCiAgICAvL9CS0YvQtNCw0LXRgiDRgdGB0YvQu9C60YMg0L3QsCBQRE8NCiAgICBwdWJsaWMgc3RhdGljIGZ1bmN0aW9uIGdldFBETygpew0KICAgICAgICAvL9CV0YHQu9C4INGE0YPQvdC60YbQuNGPINCy0YvQt9GL0LLQsNC10YLRgdGPINC90LUg0LIg0L/QtdGA0LLRi9C5INGA0LDQtywg0YLQviDQstGL0LTQsNC10Lwg0YHRgdGL0LvQutGDINC90LAg0L7QsdGK0LXQutGCIFBETw0KICAgICAgICBpZihzZWxmOjokZGIgIT0gbnVsbCl7cmV0dXJuIHNlbGY6OiRkYjt9DQogICAgICAgIC8v0JPRgNGD0LfQuNC8INC90LDRgdGC0YDQvtC50LrQuCDQkdCUDQogICAgICAgICRjZmcgPSBXU0VfRU5HSU5FOjpsb2FkQ29uZmlnKCJwaWNjb2xvX3BkbyIpOw0KICAgICAgICBzZWxmOjokZHNuID0gJGNmZ1snZHNuJ107DQogICAgICAgIHNlbGY6OiRjb25uZWN0X2luZm8gPSAkY2ZnWydjb25uZWN0X2luZm8nXTsNCiAgICAgICAgLy/Qn9GL0YLQsNC10LzRgdGPINC/0L7QtNC60LvRjtGH0LjRgtGM0YHRjywg0LIg0YHQu9GD0YfQsNC1INC+0YjQuNCx0LrQuCwg0L/QviDQstC+0LfQvNC+0LbQvdC+0YHRgtC4LCDQu9C+0LPQuNGA0YPQtdC8INC+0YjQuNCx0LrRgw0KICAgICAgICB0cnl7DQogICAgICAgICAgICBzZWxmOjokZGIgPSBuZXcgUERPKHNlbGY6OiRkc24sc2VsZjo6JGNvbm5lY3RfaW5mb1sndXNlcm5hbWUnXSxzZWxmOjokY29ubmVjdF9pbmZvWydwYXNzd29yZCddLHNlbGY6OiRvcHQpOw0KICAgICAgICB9Y2F0Y2goUERPRXhjZXB0aW9uICRlKXsNCiAgICAgICAgICAgIGlmKFdTRV9FTkdJTkU6OmNoZWNrU2NyaXB0KCdwaWNjb2xvX2xvZycpKXsNCiAgICAgICAgICAgICAgICBwaWNjb2xvX2xvZzo6YWRkKCRlLT5nZXRNZXNzYWdlKCkscmVwb3J0c19sb2c6OkxFVkVMX0VSUk9SLCRlLT5nZXRUcmFjZUFzU3RyaW5nKCkpOw0KICAgICAgICAgICAgfQ0KICAgICAgICB9DQogICAgICAgIHJldHVybiBzZWxmOjokZGI7DQogICAgfQ0KICAgIA0KICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYmluZEFkbWluUGFnZSgpew0KICAgICAgICANCiAgICAgICAgJGNmZyA9IFdTRV9FTkdJTkU6OmxvYWRDb25maWcoInBpY2NvbG9fcGRvIik7DQogICAgICAgICRtc2cgPSAnJzsNCiAgICAgICAgDQogICAgICAgIGlmKGZpbHRlcl9pbnB1dChJTlBVVF9QT1NULCdwZG9fc2V0dGluZ3NfcG9zdCcpICE9PSBudWxsKXsNCiAgICAgICAgICAgICRjZmdbJ2RzbiddID0gZmlsdGVyX2lucHV0KElOUFVUX1BPU1QsJ2RzbicpOw0KICAgICAgICAgICAgJGNmZ1snY29ubmVjdF9pbmZvJ11bJ3VzZXJuYW1lJ10gPSBmaWx0ZXJfaW5wdXQoSU5QVVRfUE9TVCwndXNlcm5hbWUnKTsNCiAgICAgICAgICAgICRjZmdbJ2Nvbm5lY3RfaW5mbyddWydwYXNzd29yZCddID0gZmlsdGVyX2lucHV0KElOUFVUX1BPU1QsJ3Bhc3N3b3JkJyk7DQogICAgICAgICAgICBQSUNDT0xPX0VOR0lORTo6dXBkYXRlQ29uZmlnKCdwaWNjb2xvX3BkbycsICRjZmcpOw0KICAgICAgICAgICAgc2VsZjo6JGRiID0gbnVsbDsNCiAgICAgICAgICAgICRtc2cgPSBQSUNDT0xPX0VOR0lORTo6Z2V0VG1wbCgncGljY29sb19wZG8vc2V0dGluZ3Nfc2F2ZWQnKTsNCiAgICAgICAgfQ0KICAgICAgICANCiAgICAgICAgcmV0dXJuIFBJQ0NPTE9fRU5HSU5FOjpnZXRSVG1wbCgncGljY29sb19wZG8vc2V0dGluZ3MnLCBhcnJheSgNCiAgICAgICAgICAgICdtc2cnPT4kbXNnLA0KICAgICAgICAgICAgJ2Rzbic9PiRjZmdbJ2RzbiddLA0KICAgICAgICAgICAgJ3VzZXJuYW1lJz0+JGNmZ1snY29ubmVjdF9pbmZvJ11bJ3VzZXJuYW1lJ10sDQogICAgICAgICAgICAncGFzc3dvcmQnPT4kY2ZnWydjb25uZWN0X2luZm8nXVsncGFzc3dvcmQnXQ0KICAgICAgICAgICAgICAgICkpOw0KICAgIH0NCiAgICANCn0=PGRpdiBjbGFzcz0iYWxlcnQgYWxlcnQtc3VjY2VzcyI+DQogICAg0J3QsNGB0YLRgNC+0LnQutC4INGB0L7RhdGA0LDQvdC10L3Riw0KPC9kaXY+W21zZ10NCjxmb3JtIG1ldGhvZD0iUE9TVCI+DQogICAgPGlucHV0IHR5cGU9ImhpZGRlbiIgbmFtZT0icGRvX3NldHRpbmdzX3Bvc3QiIHZhbHVlPSIxIi8+DQogICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPg0KICAgICAgICA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtYWRkb24iPkRTTjwvc3Bhbj4NCiAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0iZHNuIiB2YWx1ZT0iW2Rzbl0iIGNsYXNzPSJmb3JtLWNvbnRyb2wiLz4NCiAgICA8L2Rpdj4NCiAgICDQn9GA0LjQvNC10YAg0YHQvtGB0YLQsNCy0LvQtdC90LjRjyBEU046IDxiPm15c3FsOmhvc3Q9JdCw0LTRgNC10YFf0YHQtdGA0LLQtdGA0LBfbXlzcWwlO2RibmFtZT0l0L3QsNC30LLQsNC90LjQtV/QsdCw0LfRi1/QtNCw0L3QvdGL0YUlO2NoYXJzZXQ9dXRmODwvYj4sINCz0LTQtSAl0LDQtNGA0LXRgV/RgdC10YDQstC10YDQsF9teXNxbCUg0LggJdC90LDQt9Cy0LDQvdC40LVf0LHQsNC30Ytf0LTQsNC90L3Ri9GFJSDQvdC10L7QsdGF0L7QtNC40LzQviDQt9Cw0LzQtdC90LjRgtGMINC90LAg0LLQsNGI0Lgg0LTQsNC90L3Ri9C1Lg0KICAgIDxici8+PGJyLz4NCiAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCI+DQogICAgICAgIDxzcGFuIGNsYXNzPSJpbnB1dC1ncm91cC1hZGRvbiI+0JjQvNGPINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjzwvc3Bhbj4NCiAgICA8aW5wdXQgdHlwZT0idGV4dCIgbmFtZT0idXNlcm5hbWUiIHZhbHVlPSJbdXNlcm5hbWVdIiBjbGFzcz0iZm9ybS1jb250cm9sIi8+DQogICAgPC9kaXY+PGJyLz4NCiAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPg0KICAgICAgICA8c3BhbiBjbGFzcz0iaW5wdXQtZ3JvdXAtYWRkb24iPtCf0LDRgNC+0LvRjDwvc3Bhbj4NCiAgICA8aW5wdXQgdHlwZT0icGFzc3dvcmQiIG5hbWU9InBhc3N3b3JkIiB2YWx1ZT0iW3Bhc3N3b3JkXSIgY2xhc3M9ImZvcm0tY29udHJvbCIvPg0KICAgIDwvZGl2Pjxici8+DQogICAgPGlucHV0IHR5cGU9InN1Ym1pdCIgdmFsdWU9ItCh0L7RhdGA0LDQvdC40YLRjCIgY2xhc3M9ImZvcm0tY29udHJvbCBidG4gYnRuLXN1Y2Nlc3MiLz4NCjwvZm9ybT4=PHRhYmxlIGNsYXNzPSJ0YWJsZSB0YWJsZS1ob3ZlciI+DQogICAgPHRoZWFkPjx0aD7QmNCz0YDQvtC6PC90aD48dGg+0JfQsNCx0LDQvdC40Ls8L3RoPjx0aD7QlNCw0YLQsCDQsdCw0L3QsDwvdGg+PHRoPtCU0LDRgtCwINGA0LDQt9Cx0LDQvdCwPC90aD48dGg+0J/RgNC40YfQuNC90LAg0LHQsNC90LA8L3RoPjwvdGhlYWQ+DQogICAgW2xpbmVzXQ0KPC90YWJsZT4=W3sicGF0aCI6InJld3JpdGUiLCJpbmZvIjoicGFja2FnZS5qc29uIn0seyJwYXRoIjoibWNfYmFubGlzdCIsImluZm8iOiJwYWNrYWdlLmpzb24ifSx7InBhdGgiOiJwaWNjb2xvX3BkbyIsImluZm8iOiJwYWNrYWdlLmpzb24ifV0=